{"version":3,"file":"38.bundle.js","mappings":"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","sources":["webpack://neodash/./src/card/Card.tsx","webpack://neodash/./src/card/CardAddButton.tsx","webpack://neodash/./src/card/CardSelectors.ts","webpack://neodash/./src/card/CardStyle.ts","webpack://neodash/./src/card/settings/CardSettingsHeader.tsx","webpack://neodash/./src/card/settings/CardSettingsContent.tsx","webpack://neodash/./src/card/settings/CardSettings.tsx","webpack://neodash/./src/card/view/CardViewHeader.tsx","webpack://neodash/./src/card/view/CardViewFooter.tsx","webpack://neodash/./src/report/ReportWrapper.tsx","webpack://neodash/./src/card/view/CardView.tsx","webpack://neodash/./src/component/misc/DashboardConnectionUpdateHandler.tsx","webpack://neodash/./src/config/PageConfig.ts","webpack://neodash/./src/dashboard/Dashboard.tsx","webpack://neodash/./src/dashboard/header/DashboardHeader.tsx","webpack://neodash/./src/dashboard/header/DashboardHeaderAboutButton.tsx","webpack://neodash/./src/dashboard/header/DashboardHeaderDownloadImageButton.tsx","webpack://neodash/./src/dashboard/header/DashboardHeaderLogoutButton.tsx","webpack://neodash/./src/dashboard/header/DashboardHeaderPageList.tsx","webpack://neodash/./src/dashboard/header/DashboardHeaderPageTitle.tsx","webpack://neodash/./src/dashboard/header/DashboardTitle.tsx","webpack://neodash/./src/dashboard/sidebar/DashboardSidebar.tsx","webpack://neodash/./src/dashboard/sidebar/DashboardSidebarListItem.tsx","webpack://neodash/./src/dashboard/sidebar/menu/DashboardSidebarCreateMenu.tsx","webpack://neodash/./src/dashboard/sidebar/menu/DashboardSidebarDashboardMenu.tsx","webpack://neodash/./src/dashboard/sidebar/menu/DashboardSidebarDatabaseMenu.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarAccessModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarCreateModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarDeleteModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarExportModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarImportModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarInfoModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarLoadModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarSaveModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/DashboardSidebarShareModal.tsx","webpack://neodash/./src/dashboard/sidebar/modal/legacy/LegacyShareModal.tsx","webpack://neodash/./src/extensions/ExtensionsModal.tsx","webpack://neodash/./src/modal/DeletePageModal.tsx","webpack://neodash/./src/modal/ExportModal.tsx","webpack://neodash/./src/modal/ModalSelectors.tsx","webpack://neodash/./src/modal/ReportExamplesModal.tsx","webpack://neodash/./src/page/Page.tsx","webpack://neodash/./src/page/PageSelectors.ts","webpack://neodash/./src/config/DashboardConfig.ts","webpack://neodash/./src/settings/SettingsModal.tsx","webpack://neodash/./src/utils/accessibility.ts"],"sourcesContent":["import { Card, Collapse, debounce } from '@mui/material';\r\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\r\nimport NeoCardSettings from './settings/CardSettings';\r\nimport NeoCardView from './view/CardView';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  updateFieldsThunk,\r\n  updateSelectionThunk,\r\n  updateReportQueryThunk,\r\n  toggleCardSettingsThunk,\r\n  updateReportSettingThunk,\r\n  updateReportTitleThunk,\r\n  updateReportTypeThunk,\r\n  updateReportDatabaseThunk,\r\n} from './CardThunks';\r\nimport { toggleReportSettings } from './CardActions';\r\nimport { getReportState } from './CardSelectors';\r\nimport {\r\n  getDashboardIsEditable,\r\n  getDatabase,\r\n  getGlobalParameters,\r\n  getSessionParameters,\r\n} from '../settings/SettingsSelectors';\r\nimport { updateGlobalParameterThunk } from '../settings/SettingsThunks';\r\nimport useDimensions from 'react-cool-dimensions';\r\nimport { setReportHelpModalOpen } from '../application/ApplicationActions';\r\nimport { loadDatabaseListFromNeo4jThunk } from '../dashboard/DashboardThunks';\r\nimport { Neo4jContext, Neo4jContextState } from 'use-neo4j/dist/neo4j.context';\r\nimport { getDashboardExtensions } from '../dashboard/DashboardSelectors';\r\nimport { downloadComponentAsImage } from '../chart/ChartUtils';\r\nimport { Dialog } from '@neo4j-ndl/react';\r\nimport { createNotificationThunk } from '../page/PageThunks';\r\n\r\nconst NeoCard = ({\r\n  id, // id of the card.\r\n  report, // state of the card, retrieved based on card id.\r\n  editable, // whether the card is editable.\r\n  database, // the neo4j database that the card is running against.\r\n  extensions, // A set of enabled extensions.\r\n  globalParameters, // Query parameters that are globally set for the entire dashboard.\r\n  dashboardSettings, // Dictionary of settings for the entire dashboard.\r\n  onRemovePressed, // action to take when the card is removed. (passed from parent)\r\n  onClonePressed, // action to take when user presses the clone button\r\n  onReportHelpButtonPressed, // action to take when someone clicks the 'help' button in the report settings.\r\n  onTitleUpdate, // action to take when the card title is updated.\r\n  onTypeUpdate, // action to take when the card report type is updated.\r\n  onFieldsUpdate, // action to take when the set of returned query fields is updated.\r\n  onQueryUpdate, // action to take when the card query is updated.\r\n  onReportSettingUpdate, // action to take when an advanced report setting is updated.\r\n  onSelectionUpdate, // action to take when the selected visualization fields are updated.\r\n  onGlobalParameterUpdate, // action to take when a report updates a dashboard parameter.\r\n  onToggleCardSettings, // action to take when the card settings button is clicked.\r\n  onToggleReportSettings, // action to take when the report settings (advanced settings) button is clicked.\r\n  onDatabaseChanged, // action to take when the user changes the database related to the card\r\n  loadDatabaseListFromNeo4j, // Thunk to get the list of databases\r\n  createNotification, // Thunk to create a global notification pop-up.\r\n}) => {\r\n  // Will be used to fetch the list of current databases\r\n  const { driver } = useContext<Neo4jContextState>(Neo4jContext);\r\n\r\n  const [databaseList, setDatabaseList] = React.useState([database]);\r\n  const [databaseListLoaded, setDatabaseListLoaded] = React.useState(false);\r\n\r\n  const ref = React.useRef();\r\n\r\n  // fetching the list of databases from neo4j, filtering out the 'system' db\r\n  useEffect(() => {\r\n    if (!databaseListLoaded) {\r\n      loadDatabaseListFromNeo4j(driver, (result) => {\r\n        let index = result.indexOf('system');\r\n        if (index > -1) {\r\n          // only splice array when item is found\r\n          result.splice(index, 1); // 2nd parameter means remove one item only\r\n        }\r\n        setDatabaseList(result);\r\n      });\r\n      setDatabaseListLoaded(true);\r\n    }\r\n  }, [report.query]);\r\n\r\n  const [settingsOpen, setSettingsOpen] = React.useState(false);\r\n  const debouncedOnToggleCardSettings = useCallback(debounce(onToggleCardSettings, 500), []);\r\n  const [collapseTimeout, setCollapseTimeout] = React.useState(report.collapseTimeout);\r\n\r\n  const { observe, width, height } = useDimensions({\r\n    onResize: ({ observe, unobserve }) => {\r\n      // Triggered whenever the size of the target is changed...\r\n      unobserve(); // To stop observing the current target element\r\n      observe(); // To re-start observing the current target element\r\n    },\r\n  });\r\n\r\n  const [expanded, setExpanded] = useState(false);\r\n  const onToggleCardExpand = () => {\r\n    // When we re-minimize a card, close the settings to avoid position issues.\r\n    if (expanded && settingsOpen) {\r\n      onToggleCardSettings(id, false);\r\n    }\r\n    setExpanded(!expanded);\r\n  };\r\n\r\n  const [active, setActive] = React.useState(\r\n    report.settings && report.settings.autorun !== undefined ? report.settings.autorun : true\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!report.settingsOpen) {\r\n      setActive(report.settings && report.settings.autorun !== undefined ? report.settings.autorun : true);\r\n    }\r\n  }, [report.query]);\r\n\r\n  useEffect(() => {\r\n    setSettingsOpen(report.settingsOpen);\r\n  }, [report.settingsOpen]);\r\n\r\n  useEffect(() => {\r\n    setCollapseTimeout(report.collapseTimeout);\r\n  }, [report.collapseTimeout]);\r\n\r\n  // TODO - get rid of some of the props-drilling here...\r\n  const component = (\r\n    <div\r\n      ref={observe}\r\n      className='n-bg-neutral-bg-weak overflow-hidden n-shadow-l4 border-2 border-neutral-border-strong min-w-max rounded-lg px-4 py-5 sm:p-6 n-h-full'\r\n    >\r\n      {/* The front of the card, referred to as the 'view' */}\r\n      <Collapse disablestrictmodecompat='true' in={!settingsOpen} timeout={collapseTimeout} className='n-h-full'>\r\n        <Card ref={ref} className='n-h-full'>\r\n          <NeoCardView\r\n            id={id}\r\n            settingsOpen={settingsOpen}\r\n            editable={editable}\r\n            dashboardSettings={dashboardSettings}\r\n            extensions={extensions}\r\n            settings={report.settings ? report.settings : {}}\r\n            updateReportSetting={(name, value) => onReportSettingUpdate(id, name, value)}\r\n            createNotification={(title, message) => createNotification(title, message)}\r\n            type={report.type}\r\n            database={database}\r\n            active={active}\r\n            setActive={setActive}\r\n            onDownloadImage={() => downloadComponentAsImage(ref)}\r\n            query={report.query}\r\n            globalParameters={globalParameters}\r\n            fields={report.fields ? report.fields : []}\r\n            selection={report.selection}\r\n            widthPx={width}\r\n            heightPx={height}\r\n            title={report.title}\r\n            expanded={expanded}\r\n            onToggleCardExpand={onToggleCardExpand}\r\n            onGlobalParameterUpdate={onGlobalParameterUpdate}\r\n            onSelectionUpdate={(selectable, field) => onSelectionUpdate(id, selectable, field)}\r\n            onTitleUpdate={(title) => onTitleUpdate(id, title)}\r\n            onFieldsUpdate={(fields) => onFieldsUpdate(id, fields)}\r\n            onToggleCardSettings={() => {\r\n              setSettingsOpen(true);\r\n              setCollapseTimeout('auto');\r\n              debouncedOnToggleCardSettings(id, true);\r\n            }}\r\n          />\r\n        </Card>\r\n      </Collapse>\r\n      {/* The back of the card, referred to as the 'settings' */}\r\n      <Collapse disablestrictmodecompat='true' in={settingsOpen} timeout={collapseTimeout}>\r\n        <Card className='n-h-full'>\r\n          <NeoCardSettings\r\n            pagenumber={dashboardSettings.pagenumber}\r\n            reportId={id}\r\n            settingsOpen={settingsOpen}\r\n            query={report.query}\r\n            database={database}\r\n            databaseList={databaseList}\r\n            width={report.width}\r\n            height={report.height}\r\n            heightPx={height}\r\n            fields={report.fields}\r\n            schema={report.schema}\r\n            type={report.type}\r\n            expanded={expanded}\r\n            extensions={extensions}\r\n            dashboardSettings={dashboardSettings}\r\n            onToggleCardExpand={onToggleCardExpand}\r\n            setActive={setActive}\r\n            reportSettings={report.settings}\r\n            reportSettingsOpen={report.advancedSettingsOpen}\r\n            onQueryUpdate={(query) => onQueryUpdate(id, query)}\r\n            onDatabaseChanged={(database) => onDatabaseChanged(id, database)}\r\n            onReportSettingUpdate={(setting, value) => onReportSettingUpdate(id, setting, value)}\r\n            onTypeUpdate={(type) => onTypeUpdate(id, type)}\r\n            onReportHelpButtonPressed={() => onReportHelpButtonPressed()}\r\n            onRemovePressed={() => onRemovePressed(id)}\r\n            onClonePressed={() => onClonePressed(id)}\r\n            onToggleCardSettings={() => {\r\n              setSettingsOpen(false);\r\n              setCollapseTimeout('auto');\r\n              debouncedOnToggleCardSettings(id, false);\r\n            }}\r\n            onToggleReportSettings={() => onToggleReportSettings(id)}\r\n          />\r\n        </Card>\r\n      </Collapse>\r\n    </div>\r\n  );\r\n\r\n  // If the card is viewed in fullscreen, wrap it in a dialog.\r\n  // TODO - this causes a re-render (and therefore, a re-run of the report)\r\n  // Look into React Portals: https://stackoverflow.com/questions/61432878/how-to-render-child-component-outside-of-its-parent-component-dom-hierarchy\r\n  if (expanded) {\r\n    return (\r\n      <Dialog open={expanded} aria-labelledby='form-dialog-title' className='dialog-xxl'>\r\n        <Dialog.Content style={{ height: document.documentElement.clientHeight - 200 }}>{component}</Dialog.Content>\r\n      </Dialog>\r\n    );\r\n  }\r\n  return component;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  report: getReportState(state, ownProps.id),\r\n  extensions: getDashboardExtensions(state),\r\n  editable: getDashboardIsEditable(state),\r\n  database: getDatabase(\r\n    state,\r\n    ownProps && ownProps.dashboardSettings ? ownProps.dashboardSettings.pagenumber : undefined,\r\n    ownProps.id\r\n  ),\r\n  globalParameters: { ...getGlobalParameters(state), ...getSessionParameters(state) },\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onTitleUpdate: (id: any, title: any) => {\r\n    dispatch(updateReportTitleThunk(id, title));\r\n  },\r\n  onQueryUpdate: (id: any, query: any) => {\r\n    dispatch(updateReportQueryThunk(id, query));\r\n  },\r\n  onTypeUpdate: (id: any, type: any) => {\r\n    dispatch(updateReportTypeThunk(id, type));\r\n  },\r\n  onReportSettingUpdate: (id: any, setting: any, value: any) => {\r\n    dispatch(updateReportSettingThunk(id, setting, value));\r\n  },\r\n  onFieldsUpdate: (id: any, fields: any) => {\r\n    dispatch(updateFieldsThunk(id, fields));\r\n  },\r\n  onGlobalParameterUpdate: (key: any, value: any) => {\r\n    dispatch(updateGlobalParameterThunk(key, value));\r\n  },\r\n  onSelectionUpdate: (id: any, selectable: any, field: any) => {\r\n    dispatch(updateSelectionThunk(id, selectable, field));\r\n  },\r\n  onToggleCardSettings: (id: any, open: any) => {\r\n    dispatch(toggleCardSettingsThunk(id, open));\r\n  },\r\n  onReportHelpButtonPressed: () => {\r\n    dispatch(setReportHelpModalOpen(true));\r\n  },\r\n  onToggleReportSettings: (id: any) => {\r\n    dispatch(toggleReportSettings(id));\r\n  },\r\n  onDatabaseChanged: (id: any, database: any) => {\r\n    dispatch(updateReportDatabaseThunk(id, database));\r\n  },\r\n  createNotification: (title: any, message: any) => {\r\n    dispatch(createNotificationThunk(title, message));\r\n  },\r\n  loadDatabaseListFromNeo4j: (driver, callback) => dispatch(loadDatabaseListFromNeo4jThunk(driver, callback)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoCard);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Card, CardContent } from '@mui/material';\r\nimport { IconButton } from '@neo4j-ndl/react';\r\nimport { SquaresPlusIconOutline } from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Button to add a new report to the current page.\r\n */\r\nconst NeoAddNewCard = ({ onCreatePressed }) => {\r\n  return (\r\n    <div>\r\n      <Card className='n-bg-dark-neutral-text-weak'>\r\n        <CardContent style={{ height: '429px' }}>\r\n          <IconButton\r\n            aria-label='add report'\r\n            className='centered'\r\n            onClick={() => {\r\n              onCreatePressed();\r\n            }}\r\n            size='large'\r\n            floating\r\n          >\r\n            <SquaresPlusIconOutline />\r\n          </IconButton>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoAddNewCard);\r\n","export const getDashboardTitle = (state: any) => state.dashboard.title;\r\n\r\nexport const getReportState = (state: any, id: any) => {\r\n  const { pagenumber } = state.dashboard.settings;\r\n  return state.dashboard.pages[pagenumber].reports.find((o) => o.id === id);\r\n};\r\n","// TODO We need to refactor styled components\r\nimport styled from 'styled-components';\r\n\r\nexport const ReportItemContainer = styled.div``;\r\n","import React from 'react';\r\nimport { Tooltip, CardHeader } from '@mui/material';\r\nimport { IconButton } from '@neo4j-ndl/react';\r\nimport {\r\n  ExpandIcon,\r\n  ShrinkIcon,\r\n  DragIcon,\r\n  QuestionMarkCircleIconOutline,\r\n  TrashIconOutline,\r\n  DocumentDuplicateIconOutline,\r\n  PlayCircleIconSolid,\r\n} from '@neo4j-ndl/react/icons';\r\n\r\nconst NeoCardSettingsHeader = ({\r\n  onRemovePressed,\r\n  onToggleCardSettings,\r\n  onToggleCardExpand,\r\n  expanded,\r\n  fullscreenEnabled,\r\n  onReportHelpButtonPressed,\r\n  onClonePressed,\r\n}) => {\r\n  const maximizeButton = (\r\n    <IconButton aria-label='maximize' onClick={onToggleCardExpand}>\r\n      <ExpandIcon />\r\n    </IconButton>\r\n  );\r\n\r\n  const unMaximizeButton = (\r\n    <IconButton aria-label='un-maximize' onClick={onToggleCardExpand}>\r\n      <ShrinkIcon />\r\n    </IconButton>\r\n  );\r\n\r\n  return (\r\n    <CardHeader\r\n      avatar={\r\n        <div style={{ marginTop: '-8px', paddingBottom: '1px' }}>\r\n          <IconButton clean size='medium' aria-label={'Move Report'} className='n-relative -n-left-3 drag-handle'>\r\n            <DragIcon aria-label={'Move Report'} />\r\n          </IconButton>\r\n          <Tooltip title='Help' aria-label='Help' disableInteractive>\r\n            <IconButton aria-label='Help' onClick={onReportHelpButtonPressed} clean size='medium'>\r\n              <QuestionMarkCircleIconOutline aria-label={'Help'} />\r\n            </IconButton>\r\n          </Tooltip>\r\n          <Tooltip title='Delete' aria-label='Delete' disableInteractive>\r\n            <IconButton style={{ color: 'red' }} aria-label='remove' onClick={onRemovePressed} clean size='medium'>\r\n              <TrashIconOutline aria-label={'Delete'} />\r\n            </IconButton>\r\n          </Tooltip>\r\n          <Tooltip title='Clone' aria-label='Clone' disableInteractive>\r\n            <IconButton style={{ color: 'green' }} aria-label='Clone' onClick={onClonePressed} clean size='medium'>\r\n              <DocumentDuplicateIconOutline aria-label={'Clone'} />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </div>\r\n      }\r\n      action={\r\n        <>\r\n          {fullscreenEnabled ? expanded ? unMaximizeButton : maximizeButton : <></>}\r\n          <Tooltip title='Run' aria-label='run' disableInteractive>\r\n            <IconButton\r\n              aria-label='run'\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                onToggleCardSettings();\r\n              }}\r\n              clean\r\n              size='medium'\r\n            >\r\n              <PlayCircleIconSolid />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </>\r\n      }\r\n      title=''\r\n      subheader=''\r\n    />\r\n  );\r\n};\r\n\r\nexport default NeoCardSettingsHeader;\r\n","import React, { useEffect } from 'react';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport debounce from 'lodash/debounce';\r\nimport { useCallback } from 'react';\r\nimport NeoCodeEditorComponent, {\r\n  DEFAULT_CARD_SETTINGS_HELPER_TEXT_STYLE,\r\n} from '../../component/editor/CodeEditorComponent';\r\nimport { getReportTypes } from '../../extensions/ExtensionUtils';\r\nimport { Dropdown } from '@neo4j-ndl/react';\r\nimport { EXTENSIONS_CARD_SETTINGS_COMPONENT } from '../../extensions/ExtensionConfig';\r\nimport { objMerge } from '../../utils/ObjectManipulation';\r\n\r\nconst NeoCardSettingsContent = ({\r\n  pagenumber,\r\n  reportId,\r\n  query,\r\n  database, // Current report database\r\n  databaseList, // List of databases the user can choose from ('system' is filtered out)\r\n  reportSettings,\r\n  type,\r\n  extensions,\r\n  onQueryUpdate,\r\n  onReportSettingUpdate,\r\n  onTypeUpdate,\r\n  forceRunQuery, // Callback to force close the card settings.\r\n  onDatabaseChanged, // When the database related to a report is changed it must be stored in the report state\r\n}) => {\r\n  // Ensure that we only trigger a text update event after the user has stopped typing.\r\n  const [queryText, setQueryText] = React.useState(query);\r\n  const debouncedQueryUpdate = useCallback(debounce(onQueryUpdate, 200), []);\r\n  // State to manage the current database entry inside the form\r\n  const [databaseText, setDatabaseText] = React.useState(database);\r\n  const debouncedDatabaseUpdate = useCallback(debounce(onDatabaseChanged, 200), []);\r\n\r\n  useEffect(() => {\r\n    // Reset text to the dashboard state when the page gets reorganized.\r\n    if (query !== queryText) {\r\n      setQueryText(query);\r\n    }\r\n  }, [query]);\r\n\r\n  const reportTypes = getReportTypes(extensions);\r\n  const report = reportTypes[type];\r\n  const SettingsComponent = report?.settingsComponent || {};\r\n\r\n  function hasExtensionComponents() {\r\n    return (\r\n      Object.keys(EXTENSIONS_CARD_SETTINGS_COMPONENT).filter(\r\n        (name) => extensions[name] && EXTENSIONS_CARD_SETTINGS_COMPONENT[name]\r\n      ).length > 0\r\n    );\r\n  }\r\n\r\n  function updateCypherQuery(value) {\r\n    debouncedQueryUpdate(value);\r\n    setQueryText(value);\r\n  }\r\n\r\n  function renderExtensionsComponents() {\r\n    const res = (\r\n      <>\r\n        {Object.keys(EXTENSIONS_CARD_SETTINGS_COMPONENT).map((name) => {\r\n          const Component = extensions[name] ? EXTENSIONS_CARD_SETTINGS_COMPONENT[name] : '';\r\n          return Component ? (\r\n            <Component\r\n              pagenumber={pagenumber}\r\n              reportId={reportId}\r\n              reportType={type}\r\n              extensions={extensions}\r\n              onExecute={() => {\r\n                onQueryUpdate(queryText);\r\n                forceRunQuery();\r\n              }}\r\n              cypherQuery={queryText}\r\n              updateCypherQuery={updateCypherQuery}\r\n            />\r\n          ) : (\r\n            <></>\r\n          );\r\n        })}\r\n      </>\r\n    );\r\n    return res;\r\n  }\r\n\r\n  const defaultQueryBoxComponent = (\r\n    <>\r\n      <NeoCodeEditorComponent\r\n        value={queryText}\r\n        editable={true}\r\n        language={report?.inputMode || 'cypher'}\r\n        onExecute={() => {\r\n          onQueryUpdate(queryText);\r\n          forceRunQuery();\r\n        }}\r\n        onChange={(value) => {\r\n          updateCypherQuery(value);\r\n        }}\r\n        placeholder={`Enter Cypher here...`}\r\n      />\r\n      <div style={DEFAULT_CARD_SETTINGS_HELPER_TEXT_STYLE}>{report?.helperText || ''}</div>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <CardContent className='n-py-2'>\r\n      <Dropdown\r\n        data-test='type-dropdown'\r\n        id='type'\r\n        label='Type'\r\n        type='select'\r\n        selectProps={{\r\n          onChange: (newValue) =>\r\n            newValue && onTypeUpdate(Object.keys(reportTypes).find((key) => reportTypes[key].label === newValue.value)),\r\n          options: Object.keys(reportTypes).map((option) => ({\r\n            label: report && reportTypes[option].label,\r\n            value: report && reportTypes[option].label,\r\n          })),\r\n          value: {\r\n            label: report?.label || '',\r\n            value: report?.label || '',\r\n          },\r\n          menuPortalTarget: document.querySelector('#overlay'),\r\n        }}\r\n        fluid\r\n        style={{ marginLeft: '0px', marginRight: '10px', width: '47%', maxWidth: '200px', display: 'inline-block' }}\r\n      />\r\n\r\n      {report?.disableDatabaseSelector == undefined ? (\r\n        <Dropdown\r\n          id='databaseSelector'\r\n          label='Database'\r\n          placeholder='neo4j'\r\n          type='select'\r\n          selectProps={{\r\n            onChange: (newValue) => {\r\n              newValue && setDatabaseText(newValue.value);\r\n              newValue && debouncedDatabaseUpdate(newValue.value);\r\n            },\r\n            options: databaseList.map((database) => ({\r\n              label: database,\r\n              value: database,\r\n            })),\r\n            value: { label: databaseText, value: databaseText },\r\n            menuPortalTarget: document.querySelector('#overlay'),\r\n          }}\r\n          fluid\r\n          style={{ marginLeft: '0px', marginRight: '10px', width: '47%', maxWidth: '200px', display: 'inline-block' }}\r\n        />\r\n      ) : (\r\n        <></>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      {/* Allow for overriding the code box with a custom component */}\r\n      {report && report.settingsComponent ? (\r\n        <SettingsComponent\r\n          onReportSettingUpdate={onReportSettingUpdate}\r\n          settings={objMerge({ helperText: report.helperText, inputMode: report.inputMode }, reportSettings)}\r\n          database={database}\r\n          query={query}\r\n          onQueryUpdate={onQueryUpdate}\r\n          onExecute={() => {\r\n            onQueryUpdate(queryText);\r\n            forceRunQuery();\r\n          }}\r\n        />\r\n      ) : (\r\n        <div>{hasExtensionComponents() ? renderExtensionsComponents() : defaultQueryBoxComponent}</div>\r\n      )}\r\n    </CardContent>\r\n  );\r\n};\r\n\r\nexport default NeoCardSettingsContent;\r\n","import React from 'react';\r\nimport { ReportItemContainer } from '../CardStyle';\r\nimport NeoCardSettingsHeader from './CardSettingsHeader';\r\nimport NeoCardSettingsContent from './CardSettingsContent';\r\nimport NeoCardSettingsFooter from './CardSettingsFooter';\r\nimport { CardContent } from '@mui/material';\r\nimport { CARD_HEADER_HEIGHT } from '../../config/CardConfig';\r\n\r\nconst NeoCardSettings = ({\r\n  settingsOpen,\r\n  pagenumber,\r\n  reportId,\r\n  query,\r\n  database, // Current database related to the report\r\n  databaseList, // List of databases the user can choose from ('system' is filtered out)\r\n  width,\r\n  height,\r\n  type,\r\n  reportSettings,\r\n  reportSettingsOpen,\r\n  fields,\r\n  schema,\r\n  heightPx,\r\n  extensions, // A set of enabled extensions.\r\n  onQueryUpdate,\r\n  onDatabaseChanged, // When the database related to a report is changed it must be stored in the report state\r\n  onRemovePressed,\r\n  onClonePressed,\r\n  onReportSettingUpdate,\r\n  onToggleCardSettings,\r\n  onTypeUpdate,\r\n  setActive,\r\n  onReportHelpButtonPressed,\r\n  onToggleReportSettings,\r\n  dashboardSettings,\r\n  expanded,\r\n  onToggleCardExpand,\r\n}) => {\r\n  const reportHeight = heightPx - CARD_HEADER_HEIGHT + 19;\r\n\r\n  const cardSettingsHeader = (\r\n    <NeoCardSettingsHeader\r\n      expanded={expanded}\r\n      onToggleCardExpand={onToggleCardExpand}\r\n      onRemovePressed={onRemovePressed}\r\n      onClonePressed={onClonePressed}\r\n      onReportHelpButtonPressed={onReportHelpButtonPressed}\r\n      fullscreenEnabled={dashboardSettings.fullscreenEnabled}\r\n      onToggleCardSettings={(e) => {\r\n        setActive(reportSettings.autorun !== undefined ? reportSettings.autorun : true);\r\n        onToggleCardSettings(e);\r\n      }}\r\n    />\r\n  );\r\n\r\n  // TODO - instead of hiding everything based on settingsopen, only hide the components that slow down render (cypher editor)\r\n  const cardSettingsContent = settingsOpen ? (\r\n    <NeoCardSettingsContent\r\n      pagenumber={pagenumber}\r\n      reportId={reportId}\r\n      query={query}\r\n      database={database}\r\n      reportSettings={reportSettings}\r\n      width={width}\r\n      height={height}\r\n      type={type}\r\n      extensions={extensions}\r\n      databaseList={databaseList}\r\n      onDatabaseChanged={onDatabaseChanged}\r\n      onQueryUpdate={onQueryUpdate}\r\n      onReportSettingUpdate={onReportSettingUpdate}\r\n      onTypeUpdate={onTypeUpdate}\r\n      forceRunQuery={onToggleCardSettings}\r\n    ></NeoCardSettingsContent>\r\n  ) : (\r\n    <CardContent className='n-py-2' />\r\n  );\r\n\r\n  const cardSettingsFooter = settingsOpen ? (\r\n    <NeoCardSettingsFooter\r\n      type={type}\r\n      fields={fields}\r\n      schema={schema}\r\n      extensions={extensions}\r\n      reportSettings={reportSettings}\r\n      reportSettingsOpen={reportSettingsOpen}\r\n      onToggleReportSettings={onToggleReportSettings}\r\n      onReportSettingUpdate={onReportSettingUpdate}\r\n    ></NeoCardSettingsFooter>\r\n  ) : (\r\n    <div></div>\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={`card-view n-bg-palette-neutral-bg-weak n-text-palette-neutral-text-default ${\r\n        expanded ? 'expanded' : ''\r\n      } n-overflow-y-auto n-h-full`}\r\n    >\r\n      {cardSettingsHeader}\r\n      <ReportItemContainer style={{ height: reportHeight }} className='-n-mt-2'>\r\n        {cardSettingsContent}\r\n        {cardSettingsFooter}\r\n      </ReportItemContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NeoCardSettings;\r\n","import React, { useEffect } from 'react';\r\nimport { Badge, CardHeader, Dialog, DialogContent, DialogTitle, TextField, Tooltip } from '@mui/material';\r\nimport debounce from 'lodash/debounce';\r\nimport { useCallback } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport gfm from 'remark-gfm';\r\nimport { replaceDashboardParameters } from '../../chart/ChartUtils';\r\n\r\nimport { IconButton } from '@neo4j-ndl/react';\r\nimport {\r\n  DragIcon,\r\n  EllipsisVerticalIconOutline,\r\n  ArrowPathIconOutline,\r\n  ExpandIcon,\r\n  ShrinkIcon,\r\n  CameraIconSolid,\r\n  InformationCircleIconOutline,\r\n  XMarkIconOutline,\r\n} from '@neo4j-ndl/react/icons';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\n\r\nconst NeoCardViewHeader = ({\r\n  title,\r\n  description,\r\n  editable,\r\n  onTitleUpdate,\r\n  fullscreenEnabled,\r\n  downloadImageEnabled,\r\n  refreshButtonEnabled,\r\n  onToggleCardSettings,\r\n  onManualRefreshCard,\r\n  onDownloadImage,\r\n  onToggleCardExpand,\r\n  expanded,\r\n  parameters,\r\n}) => {\r\n  const [text, setText] = React.useState(title);\r\n  const [parsedText, setParsedText] = React.useState(title);\r\n  const [editing, setEditing] = React.useState(false);\r\n  const [descriptionModalOpen, setDescriptionModalOpen] = React.useState(false);\r\n\r\n  function replaceParamsOnString(s, p) {\r\n    let parsed: string;\r\n    parsed = replaceDashboardParameters(s, p);\r\n    return parsed;\r\n  }\r\n\r\n  // Ensure that we only trigger a text update event after the user has stopped typing.\r\n  const debouncedTitleUpdate = useCallback(debounce(onTitleUpdate, 250), []);\r\n\r\n  useEffect(() => {\r\n    let titleParsed = replaceParamsOnString(`${title}`, parameters);\r\n    if (!editing) {\r\n      setParsedText(titleParsed);\r\n    }\r\n  }, [editing, parameters]);\r\n\r\n  useEffect(() => {\r\n    // Reset text to the dashboard state when the page gets reorganized.\r\n    if (text !== title) {\r\n      setText(title);\r\n    }\r\n  }, [title]);\r\n\r\n  const theme = createTheme({\r\n    typography: {\r\n      fontFamily: \"'Nunito Sans', sans-serif !important\",\r\n      allVariants: { color: 'rgb(var(--palette-neutral-text-weak))' },\r\n    },\r\n    palette: {\r\n      text: {\r\n        primary: 'rgb(var(--palette-neutral-text))',\r\n      },\r\n      action: {\r\n        disabled: 'rgb(var(--palette-neutral-text-weak))',\r\n      },\r\n    },\r\n  });\r\n\r\n  const cardTitle = (\r\n    <ThemeProvider theme={theme}>\r\n      <table style={{ width: '100%' }}>\r\n        <tbody>\r\n          <tr>\r\n            {editable ? (\r\n              <td>\r\n                <IconButton\r\n                  className='n-mb-3 n-relative -n-left-3 drag-handle'\r\n                  clean\r\n                  size='medium'\r\n                  aria-label={'drag'}\r\n                  onClick={() => {}}\r\n                >\r\n                  <DragIcon />\r\n                </IconButton>\r\n              </td>\r\n            ) : (\r\n              <></>\r\n            )}\r\n            <td style={{ width: '100%' }}>\r\n              <TextField\r\n                id='standard-outlined'\r\n                onFocus={() => {\r\n                  setEditing(true);\r\n                }}\r\n                onBlur={() => {\r\n                  setEditing(false);\r\n                }}\r\n                className={'no-underline large'}\r\n                label=''\r\n                disabled={!editable}\r\n                placeholder='Report name...'\r\n                fullWidth\r\n                maxRows={4}\r\n                value={editing ? text : parsedText !== ' ' ? parsedText : ''}\r\n                onChange={(event) => {\r\n                  setText(event.target.value);\r\n                  debouncedTitleUpdate(event.target.value);\r\n                }}\r\n                size={'small'}\r\n                style={{ paddingTop: '0px important!' }}\r\n                variant={'standard'}\r\n                sx={{\r\n                  '& .MuiInputBase-input.Mui-disabled': {\r\n                    WebkitTextFillColor: 'inherit',\r\n                  },\r\n                }}\r\n              />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ThemeProvider>\r\n  );\r\n\r\n  const descriptionEnabled = description && description.length > 0;\r\n\r\n  // TODO: all components like buttons should probably be seperate files\r\n  const settingsButton = (\r\n    <Tooltip title='Settings' aria-label='settings' disableInteractive>\r\n      <IconButton aria-label='settings' onClick={onToggleCardSettings} clean size='medium'>\r\n        <EllipsisVerticalIconOutline />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  const refreshButton = (\r\n    <Tooltip title='Refresh' aria-label='refresh' disableInteractive>\r\n      <IconButton aria-label='refresh' onClick={onManualRefreshCard} clean size='medium'>\r\n        <ArrowPathIconOutline />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  const maximizeButton = (\r\n    <Tooltip title='Maximize' aria-label='maximize' disableInteractive>\r\n      <IconButton aria-label='maximize' onClick={onToggleCardExpand} clean size='medium'>\r\n        <ExpandIcon />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  const unMaximizeButton = (\r\n    <IconButton aria-label='un-maximize' onClick={onToggleCardExpand} clean size='medium'>\r\n      <ShrinkIcon />\r\n    </IconButton>\r\n  );\r\n\r\n  const downloadImageButton = (\r\n    <Tooltip title='Download as Image' aria-label='download' disableInteractive>\r\n      <IconButton onClick={onDownloadImage} aria-label='download csv' clean size='medium'>\r\n        <CameraIconSolid />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  const descriptionButton = (\r\n    <Tooltip title='Details' aria-label='details' disableInteractive>\r\n      <IconButton onClick={() => setDescriptionModalOpen(true)} aria-label='details' clean size='medium'>\r\n        <InformationCircleIconOutline />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Dialog\r\n        maxWidth={'lg'}\r\n        open={descriptionModalOpen}\r\n        onClose={() => setDescriptionModalOpen(false)}\r\n        aria-labelledby='form-dialog-title'\r\n      >\r\n        <DialogTitle id='form-dialog-title'>\r\n          {title}\r\n          <IconButton\r\n            onClick={() => setDescriptionModalOpen(false)}\r\n            style={{ padding: '3px', float: 'right' }}\r\n            aria-label={'rect badge'}\r\n            clean\r\n          >\r\n            <XMarkIconOutline />\r\n          </IconButton>\r\n        </DialogTitle>\r\n        <DialogContent style={{ minWidth: '400px' }}>\r\n          <div>\r\n            <base target='_blank' /> <ReactMarkdown plugins={[gfm]} children={description} />\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n      <CardHeader\r\n        style={{ height: '72px' }}\r\n        action={\r\n          <>\r\n            {downloadImageEnabled ? downloadImageButton : <></>}\r\n            {fullscreenEnabled ? expanded ? unMaximizeButton : maximizeButton : <></>}\r\n            {descriptionEnabled ? descriptionButton : <></>}\r\n            {refreshButtonEnabled ? refreshButton : <></>}\r\n            {editable ? settingsButton : <></>}\r\n          </>\r\n        }\r\n        title={cardTitle}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NeoCardViewHeader;\r\n","import React from 'react';\r\nimport { CardActions, FormControl, InputLabel, MenuItem, Select } from '@mui/material';\r\nimport { categoricalColorSchemes } from '../../config/ColorConfig';\r\nimport { getReportTypes } from '../../extensions/ExtensionUtils';\r\nimport { SELECTION_TYPES } from '../../config/CardConfig';\r\nimport { Dropdown, Label } from '@neo4j-ndl/react';\r\n\r\nconst NeoCardViewFooter = ({\r\n  fields,\r\n  settings,\r\n  selection,\r\n  type,\r\n  extensions,\r\n  showOptionalSelections,\r\n  onSelectionUpdate,\r\n  dashboardSettings,\r\n}) => {\r\n  /**\r\n   * For each selectable field in the visualization, give the user an option to select them from the query output fields.\r\n   */\r\n  const reportTypes = getReportTypes(extensions);\r\n  const selectableFields = reportTypes[type].selection;\r\n  const selectables = selectableFields ? Object.keys(selectableFields) : [];\r\n  const nodeColorScheme = settings && settings.nodeColorScheme ? settings.nodeColorScheme : 'neodash';\r\n  const hideSelections = settings && settings.hideSelections ? settings.hideSelections : false;\r\n  const { ignoreLabelColors } = reportTypes[type];\r\n  if (!fields || fields.length == 0 || hideSelections) {\r\n    return <div></div>;\r\n  }\r\n  return (\r\n    <CardActions\r\n      style={{\r\n        position: 'relative',\r\n        paddingLeft: '15px',\r\n        overflowX: 'scroll',\r\n        paddingBottom: '100px',\r\n      }}\r\n      disableSpacing\r\n    >\r\n      {selectables.map((selectable, index) => {\r\n        const selectionIsMandatory = !selectableFields[selectable].optional;\r\n\r\n        // Creates the component for node property selections.\r\n        if (selectableFields[selectable].type == SELECTION_TYPES.NODE_PROPERTIES) {\r\n          // Only show optional selections if we explicitly allow it.\r\n          if (showOptionalSelections || selectionIsMandatory) {\r\n            const totalColors = categoricalColorSchemes[nodeColorScheme]\r\n              ? categoricalColorSchemes[nodeColorScheme].length\r\n              : 0;\r\n            const fieldSelections = fields.map((field, i) => {\r\n              // TODO logically, it should be the last element in the field (node labels) array, as that is typically\r\n              // the most specific node label when we have multi-labels\r\n              const nodeLabel = field[0];\r\n              // TODO this convention that we have for storing node labels and properties in fields should be documented\r\n              // , and probably even converted to a generic type.\r\n              const discoveredProperties = field.slice(1);\r\n              const properties = (discoveredProperties ? [...discoveredProperties].sort() : []).concat([\r\n                '(label)',\r\n                '(id)',\r\n                '(no label)',\r\n              ]);\r\n              const color =\r\n                totalColors > 0 && !ignoreLabelColors\r\n                  ? categoricalColorSchemes[nodeColorScheme][i % totalColors]\r\n                  : 'lightgrey';\r\n              const inputColor =\r\n                dashboardSettings.theme === 'dark' ? 'var(--palette-dark-neutral-border-strong)' : 'rgba(0, 0, 0, 0.6)';\r\n              return (\r\n                <FormControl key={nodeLabel} size={'small'} variant='standard'>\r\n                  <InputLabel id={nodeLabel} style={{ color: inputColor }}>\r\n                    {nodeLabel}\r\n                  </InputLabel>\r\n                  <Select\r\n                    labelId={nodeLabel}\r\n                    id={nodeLabel}\r\n                    className={'MuiChip-root'}\r\n                    style={{ backgroundColor: color, paddingLeft: 10, minWidth: 75, marginRight: 5 }}\r\n                    onChange={(e) => onSelectionUpdate(nodeLabel, e.target.value)}\r\n                    value={selection && selection[nodeLabel] ? selection[nodeLabel] : ''}\r\n                  >\r\n                    {/* Render choices */}\r\n                    {properties.length &&\r\n                      properties.map &&\r\n                      properties.map((field) => {\r\n                        return (\r\n                          <MenuItem key={field} value={field}>\r\n                            {field}\r\n                          </MenuItem>\r\n                        );\r\n                      })}\r\n                  </Select>\r\n                </FormControl>\r\n              );\r\n            });\r\n            return fieldSelections;\r\n          }\r\n        }\r\n        // Creates the selection for all other types of components\r\n        if (\r\n          selectableFields[selectable].type == SELECTION_TYPES.LIST ||\r\n          selectableFields[selectable].type == SELECTION_TYPES.NUMBER ||\r\n          selectableFields[selectable].type == SELECTION_TYPES.NUMBER_OR_DATETIME ||\r\n          selectableFields[selectable].type == SELECTION_TYPES.TEXT\r\n        ) {\r\n          if (selectionIsMandatory || showOptionalSelections) {\r\n            const sortedFields = fields ? [...fields].sort() : [];\r\n\r\n            const fieldsToRender = selectionIsMandatory ? sortedFields : sortedFields.concat(['(none)']);\r\n            return (\r\n              <FormControl key={index} size={'small'}>\r\n                <Dropdown\r\n                  id={selectable}\r\n                  label={selectableFields[selectable].label}\r\n                  type='select'\r\n                  selectProps={{\r\n                    onChange: (newValue) =>\r\n                      (newValue && selectableFields[selectable].multiple\r\n                        ? onSelectionUpdate(\r\n                            selectable,\r\n                            newValue.map((v) => v.value)\r\n                          )\r\n                        : onSelectionUpdate(selectable, newValue.value)),\r\n                    options: fieldsToRender.map((option) => ({ label: option, value: option })),\r\n                    value: selectableFields[selectable].multiple\r\n                      ? selection[selectable].map((sel) => ({ label: sel, value: sel }))\r\n                      : { label: selection[selectable], value: selection[selectable] },\r\n                    isMulti: selectableFields[selectable].multiple,\r\n                    isClearable: false,\r\n                    menuPortalTarget: document.querySelector('#overlay'),\r\n                  }}\r\n                  fluid\r\n                  style={{\r\n                    minWidth: selectableFields[selectable].multiple ? 170 : 120,\r\n                    marginRight: 20,\r\n                    display: 'inline-block',\r\n                  }}\r\n                  placeholder={selectableFields[selectable].multiple ? 'Select (multiple)' : 'Select'}\r\n                ></Dropdown>\r\n              </FormControl>\r\n            );\r\n          }\r\n        }\r\n      })}\r\n    </CardActions>\r\n  );\r\n};\r\n\r\nexport default NeoCardViewFooter;\r\n","import React, { useEffect } from 'react';\r\nimport NeoReport from './Report';\r\nimport { withErrorBoundary, useErrorBoundary } from 'react-use-error-boundary';\r\nimport NeoCodeViewerComponent from '../component/editor/CodeViewerComponent';\r\n\r\n/**\r\n * Error boundary wrapping the report object, to ensure that unexpected errors are handled at the report level.\r\n */\r\nconst ErrorBoundary = withErrorBoundary(({ children, resetTrigger }) => {\r\n  const [error, resetError] = useErrorBoundary();\r\n\r\n  useEffect(() => {\r\n    if (resetTrigger && error) {\r\n      resetError();\r\n    }\r\n  }, [resetTrigger]);\r\n\r\n  if (error) {\r\n    return (\r\n      <NeoCodeViewerComponent\r\n        value={`An unexpected error occurred. Try refreshing the component. \\n\\n${error.stack}`}\r\n      />\r\n    );\r\n  }\r\n  return children;\r\n});\r\n\r\nexport const NeoReportWrapper = ({\r\n  id,\r\n  database,\r\n  query,\r\n  lastRunTimestamp,\r\n  parameters,\r\n  disabled,\r\n  selection,\r\n  fields,\r\n  settings,\r\n  setFields,\r\n  setGlobalParameter,\r\n  getGlobalParameter,\r\n  updateReportSetting,\r\n  createNotification,\r\n  dimensions,\r\n  rowLimit,\r\n  queryTimeLimit,\r\n  type,\r\n  expanded,\r\n  extensions,\r\n  ChartType,\r\n}) => {\r\n  return (\r\n    <ErrorBoundary resetTrigger={disabled}>\r\n      <NeoReport\r\n        id={id}\r\n        database={database}\r\n        query={query}\r\n        lastRunTimestamp={lastRunTimestamp}\r\n        parameters={parameters}\r\n        disabled={disabled}\r\n        selection={selection}\r\n        fields={fields}\r\n        settings={settings}\r\n        setFields={setFields}\r\n        setGlobalParameter={setGlobalParameter}\r\n        getGlobalParameter={getGlobalParameter}\r\n        updateReportSetting={updateReportSetting}\r\n        createNotification={createNotification}\r\n        dimensions={dimensions}\r\n        rowLimit={rowLimit}\r\n        queryTimeLimit={queryTimeLimit}\r\n        type={type}\r\n        expanded={expanded}\r\n        extensions={extensions}\r\n        ChartType={ChartType}\r\n      />\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { ReportItemContainer } from '../CardStyle';\r\nimport NeoCardViewHeader from './CardViewHeader';\r\nimport NeoCardViewFooter from './CardViewFooter';\r\nimport { CardContent } from '@mui/material';\r\nimport NeoCodeEditorComponent from '../../component/editor/CodeEditorComponent';\r\nimport { CARD_FOOTER_HEIGHT, CARD_HEADER_HEIGHT } from '../../config/CardConfig';\r\nimport { getReportTypes } from '../../extensions/ExtensionUtils';\r\nimport NeoCodeViewerComponent from '../../component/editor/CodeViewerComponent';\r\nimport { NeoReportWrapper } from '../../report/ReportWrapper';\r\nimport { identifyStyleRuleParameters } from '../../extensions/styling/StyleRuleEvaluator';\r\nimport { IconButton } from '@neo4j-ndl/react';\r\nimport { PlayCircleIconSolid } from '@neo4j-ndl/react/icons';\r\nimport { extensionEnabled } from '../../utils/ReportUtils';\r\nimport { objMerge } from '../../utils/ObjectManipulation';\r\nimport { REPORT_TYPES } from '../../config/ReportConfig';\r\n\r\nconst NeoCardView = ({\r\n  id,\r\n  title,\r\n  database,\r\n  query,\r\n  globalParameters,\r\n  widthPx,\r\n  heightPx,\r\n  fields,\r\n  extensions,\r\n  active,\r\n  setActive,\r\n  onDownloadImage,\r\n  type,\r\n  selection,\r\n  dashboardSettings,\r\n  settings,\r\n  updateReportSetting,\r\n  createNotification,\r\n  settingsOpen,\r\n  editable,\r\n  onGlobalParameterUpdate,\r\n  onSelectionUpdate,\r\n  onToggleCardSettings,\r\n  onTitleUpdate,\r\n  onFieldsUpdate,\r\n  expanded,\r\n  onToggleCardExpand,\r\n}) => {\r\n  const reportHeight = heightPx - CARD_FOOTER_HEIGHT - CARD_HEADER_HEIGHT + 20;\r\n  const cardHeight = heightPx - CARD_FOOTER_HEIGHT + 23;\r\n  const ref = React.useRef();\r\n\r\n  const settingsSelector = Object.keys(\r\n    Object.fromEntries(Object.entries(REPORT_TYPES[type]?.settings || {}).filter(([_, value]) => value.refresh))\r\n  ).reduce((obj, key) => {\r\n    return Object.assign(obj, {\r\n      [key]: settings[key],\r\n    });\r\n  }, {});\r\n\r\n  const [lastRunTimestamp, setLastRunTimestamp] = useState(Date.now());\r\n\r\n  // TODO : selectorChange should handle every case where query execution needs to be re-executed\r\n  // e.g. Change of query, type, some advanced settings...\r\n  const [selectorChange, setSelectorChange] = useState(false);\r\n\r\n  const getLocalParameters = (parse_string, drilldown = true): unknown => {\r\n    if (!parse_string || !globalParameters) {\r\n      return {};\r\n    }\r\n\r\n    let re = /(?:^|\\W|%20)\\$(\\w+)(?!\\w)/g;\r\n    let match;\r\n\r\n    // If the report styling extension is enabled, extend the list of local (relevant) parameters with those used by the style rules.\r\n    const styleRules = settings.styleRules ? settings.styleRules : [];\r\n    const styleParams = extensionEnabled(extensions, 'styling') ? identifyStyleRuleParameters(styleRules) : [];\r\n\r\n    // Similarly, if the forms extension is enabled, extract nested parameters used by parameter selectors inside the form.\r\n    const formFields = settings.formFields ? settings.formFields : [];\r\n    const formsParams =\r\n      drilldown && extensionEnabled(extensions, 'forms')\r\n        ? formFields\r\n            .map((f) => {\r\n              return Object.keys(getLocalParameters(f.query, false));\r\n            })\r\n            .flat()\r\n        : [];\r\n\r\n    let localQueryVariables: string[] = [...styleParams, ...formsParams];\r\n    while ((match = re.exec(parse_string))) {\r\n      localQueryVariables.push(match[1]);\r\n    }\r\n\r\n    let params = Object.fromEntries(\r\n      Object.entries(globalParameters).filter(([local]) => localQueryVariables.includes(local))\r\n    );\r\n\r\n    return settings.ignoreNonDefinedParams\r\n      ? objMerge(Object.fromEntries(localQueryVariables.map((name) => [name, null])), params)\r\n      : params;\r\n  };\r\n\r\n  // @ts-ignore\r\n  const reportHeader = (\r\n    <NeoCardViewHeader\r\n      title={title}\r\n      editable={editable}\r\n      description={settings.description}\r\n      fullscreenEnabled={settings.fullscreenEnabled}\r\n      downloadImageEnabled={settings.downloadImageEnabled}\r\n      refreshButtonEnabled={settings.refreshButtonEnabled}\r\n      onTitleUpdate={onTitleUpdate}\r\n      onToggleCardSettings={onToggleCardSettings}\r\n      onManualRefreshCard={() => setLastRunTimestamp(Date.now())}\r\n      settings={settings}\r\n      onDownloadImage={onDownloadImage}\r\n      onToggleCardExpand={onToggleCardExpand}\r\n      expanded={expanded}\r\n      parameters={getLocalParameters(title)}\r\n    ></NeoCardViewHeader>\r\n  );\r\n\r\n  // @ts-ignore\r\n  const reportFooter = active ? (\r\n    <NeoCardViewFooter\r\n      fields={fields}\r\n      settings={settings}\r\n      extensions={extensions}\r\n      selection={selection}\r\n      type={type}\r\n      onSelectionUpdate={onSelectionUpdate}\r\n      showOptionalSelections={settings.showOptionalSelections}\r\n      dashboardSettings={dashboardSettings}\r\n    ></NeoCardViewFooter>\r\n  ) : (\r\n    <></>\r\n  );\r\n\r\n  const localParameters = { ...getLocalParameters(query), ...getLocalParameters(settings.drilldownLink) };\r\n  const reportTypes = getReportTypes(extensions);\r\n  const reportTypeHasNoFooter = reportTypes[type] && reportTypes[type].withoutFooter;\r\n  const withoutFooter = reportTypeHasNoFooter\r\n    ? reportTypes[type].withoutFooter\r\n    : (reportTypes[type] && !reportTypes[type].selection) || (settings && settings.hideSelections);\r\n\r\n  const getGlobalParameter = (key: string): unknown => {\r\n    return globalParameters ? globalParameters[key] : undefined;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!settingsOpen) {\r\n      setLastRunTimestamp(Date.now());\r\n    }\r\n  }, [JSON.stringify(localParameters)]);\r\n\r\n  useEffect(() => {\r\n    if (!settingsOpen && (selectorChange || type === 'select')) {\r\n      setLastRunTimestamp(Date.now());\r\n    }\r\n    setSelectorChange(false);\r\n  }, [settingsOpen]);\r\n\r\n  useEffect(() => {\r\n    setSelectorChange(true);\r\n  }, [query, type, database, JSON.stringify(settingsSelector)]);\r\n\r\n  // TODO - understand why CardContent is throwing a warning based on this style config.\r\n  const cardContentStyle = {\r\n    paddingBottom: '0px',\r\n    paddingLeft: '0px',\r\n    paddingRight: '0px',\r\n    paddingTop: '0px',\r\n    width: '100%',\r\n    marginTop: '-9px',\r\n    height: expanded\r\n      ? withoutFooter\r\n        ? '100%'\r\n        : `calc(100% - ${CARD_FOOTER_HEIGHT}px)`\r\n      : withoutFooter\r\n      ? `${reportHeight + CARD_FOOTER_HEIGHT - (reportTypeHasNoFooter ? 0 : 20)}px`\r\n      : `${reportHeight}px`,\r\n    overflow: 'auto',\r\n  };\r\n  const reportContent = (\r\n    <CardContent ref={ref} style={cardContentStyle}>\r\n      {active ? (\r\n        <NeoReportWrapper\r\n          id={id}\r\n          query={query}\r\n          database={database}\r\n          parameters={localParameters}\r\n          lastRunTimestamp={lastRunTimestamp}\r\n          extensions={extensions}\r\n          disabled={settingsOpen}\r\n          selection={selection}\r\n          fields={fields}\r\n          settings={settings}\r\n          expanded={expanded}\r\n          rowLimit={dashboardSettings.disableRowLimiting ? 1000000 : reportTypes[type] && reportTypes[type].maxRecords}\r\n          dimensions={{ width: widthPx, height: heightPx }}\r\n          type={type}\r\n          ChartType={reportTypes[type] && reportTypes[type].component}\r\n          setGlobalParameter={onGlobalParameterUpdate}\r\n          getGlobalParameter={getGlobalParameter}\r\n          updateReportSetting={updateReportSetting}\r\n          createNotification={createNotification}\r\n          queryTimeLimit={dashboardSettings.queryTimeLimit ? dashboardSettings.queryTimeLimit : 20}\r\n          setFields={onFieldsUpdate}\r\n        />\r\n      ) : (\r\n        <>\r\n          <IconButton\r\n            style={{ float: 'right', marginRight: '9px' }}\r\n            aria-label='run'\r\n            onClick={() => {\r\n              setActive(true);\r\n            }}\r\n            clean\r\n          >\r\n            <PlayCircleIconSolid className='n-w-5 n-h-5' aria-label={'play'} />\r\n          </IconButton>\r\n          <NeoCodeEditorComponent\r\n            value={query}\r\n            language={'cypher'}\r\n            editable={false}\r\n            style={{\r\n              border: '1px solid lightgray',\r\n              borderRight: '35px solid #eee',\r\n              marginTop: '0px',\r\n              marginLeft: '10px',\r\n              marginRight: '10px',\r\n            }}\r\n            onChange={() => {}}\r\n            placeholder={'No query specified...'}\r\n          />\r\n        </>\r\n      )}\r\n    </CardContent>\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={`card-view n-bg-palette-neutral-bg-weak n-text-palette-neutral-text-default ${\r\n        expanded ? 'expanded' : ''\r\n      }`}\r\n      style={settings && settings.backgroundColor ? { backgroundColor: settings.backgroundColor } : {}}\r\n    >\r\n      {reportHeader}\r\n      {/* if there's no selection for this report, we don't have a footer, so the report can be taller. */}\r\n      <ReportItemContainer\r\n        style={{ height: expanded ? (withoutFooter ? 'calc(100% - 69px)' : 'calc(100% - 49px)') : cardHeight }}\r\n      >\r\n        {reportTypes[type] ? (\r\n          reportContent\r\n        ) : (\r\n          <NeoCodeViewerComponent value={'Invalid report type. Are you missing an extension?'} />\r\n        )}\r\n        {reportTypes[type] ? reportFooter : <></>}\r\n      </ReportItemContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NeoCardView;\r\n","import { useConnection } from 'use-neo4j';\r\nimport React from 'react';\r\nimport isEqual from 'lodash.isequal';\r\n/**\r\n * Updates the Neo4j context when noticing an update in the global connection state.\r\n * TODO - there's probably a better way to do this, but I'm not sure how at the moment.\r\n */\r\nconst NeoDashboardConnectionUpdateHandler = ({ pagenumber, connection, onConnectionUpdate }) => {\r\n  const [existingConnection, setExistingConnection] = React.useState(null);\r\n  if (!isEqual(connection, existingConnection)) {\r\n    // Only trigger connection settings refreshes if the connection was once set before.\r\n    if (existingConnection != null) {\r\n      useConnection(connection.protocol, connection.url, connection.port, connection.username, connection.password);\r\n      onConnectionUpdate(pagenumber);\r\n    }\r\n    setExistingConnection(connection);\r\n  }\r\n  return <div></div>;\r\n};\r\n\r\nexport default NeoDashboardConnectionUpdateHandler;\r\n","export const GRID_COMPACTION_TYPE = 'vertical'; // Can be set to vertical or horizontal or none.\r\n","import React from 'react';\r\nimport NeoPage from '../page/Page';\r\nimport NeoDashboardHeader from './header/DashboardHeader';\r\nimport NeoDashboardTitle from './header/DashboardTitle';\r\nimport NeoDashboardHeaderPageList from './header/DashboardHeaderPageList';\r\nimport { createDriver, Neo4jProvider } from 'use-neo4j';\r\nimport { applicationGetConnection, applicationGetStandaloneSettings } from '../application/ApplicationSelectors';\r\nimport { connect } from 'react-redux';\r\nimport NeoDashboardConnectionUpdateHandler from '../component/misc/DashboardConnectionUpdateHandler';\r\nimport { forceRefreshPage } from '../page/PageActions';\r\nimport { getPageNumber } from '../settings/SettingsSelectors';\r\nimport { createNotificationThunk } from '../page/PageThunks';\r\nimport { version } from '../modal/AboutModal';\r\nimport NeoDashboardSidebar from './sidebar/DashboardSidebar';\r\n\r\nconst Dashboard = ({\r\n  pagenumber,\r\n  connection,\r\n  standaloneSettings,\r\n  onConnectionUpdate,\r\n  onDownloadDashboardAsImage,\r\n  onAboutModalOpen,\r\n  resetApplication,\r\n}) => {\r\n  const [driver, setDriver] = React.useState(undefined);\r\n\r\n  // If no driver is yet instantiated, create a new one.\r\n  if (driver == undefined) {\r\n    const newDriver = createDriver(\r\n      connection.protocol,\r\n      connection.url,\r\n      connection.port,\r\n      connection.username,\r\n      connection.password,\r\n      { userAgent: `neodash/v${version}` }\r\n    );\r\n    setDriver(newDriver);\r\n  }\r\n  const content = (\r\n    <Neo4jProvider driver={driver}>\r\n      <NeoDashboardConnectionUpdateHandler\r\n        pagenumber={pagenumber}\r\n        connection={connection}\r\n        onConnectionUpdate={onConnectionUpdate}\r\n      />\r\n\r\n      {/* Navigation Bar */}\r\n      <div\r\n        className='n-w-screen n-flex n-flex-row n-items-center n-bg-neutral-bg-weak n-border-b'\r\n        style={{ borderColor: 'lightgrey' }}\r\n      >\r\n        <NeoDashboardHeader\r\n          connection={connection}\r\n          onDownloadImage={onDownloadDashboardAsImage}\r\n          onAboutModalOpen={onAboutModalOpen}\r\n          resetApplication={resetApplication}\r\n        ></NeoDashboardHeader>\r\n      </div>\r\n      {/* Main Page */}\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          height: 'calc(40vh - 32px)',\r\n          minHeight: window.innerHeight - 62,\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n        }}\r\n      >\r\n        {!standaloneSettings.standalone || (standaloneSettings.standalone && standaloneSettings.standaloneAllowLoad) ? (\r\n          <NeoDashboardSidebar />\r\n        ) : (\r\n          <></>\r\n        )}\r\n        <div className='n-w-full n-h-full n-flex n-flex-col n-items-center n-justify-center n-rounded-md'>\r\n          <div className='n-w-full n-h-full n-overflow-y-scroll n-flex n-flex-row'>\r\n            {/* Main Content */}\r\n            <main className='n-flex-1 n-relative n-z-0 n-scroll-smooth n-w-full'>\r\n              <div className='n-absolute n-inset-0 page-spacing'>\r\n                <div className='page-spacing-overflow'>\r\n                  {/* The main content of the page */}\r\n\r\n                  <div>\r\n                    {standaloneSettings.standalonePassword &&\r\n                    standaloneSettings.standalonePasswordWarningHidden !== true ? (\r\n                      <div style={{ textAlign: 'center', color: 'red', paddingTop: 60, marginBottom: -50 }}>\r\n                        Warning: NeoDash is running with a plaintext password in config.json.\r\n                      </div>\r\n                    ) : (\r\n                      <></>\r\n                    )}\r\n                    <NeoDashboardTitle />\r\n                    <NeoDashboardHeaderPageList />\r\n                    <NeoPage></NeoPage>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </main>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Neo4jProvider>\r\n  );\r\n  return content;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  connection: applicationGetConnection(state),\r\n  pagenumber: getPageNumber(state),\r\n  standaloneSettings: applicationGetStandaloneSettings(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onConnectionUpdate: (pagenumber) => {\r\n    dispatch(\r\n      createNotificationThunk(\r\n        'Connection Updated',\r\n        'You have updated your Neo4j connection, your reports have been reloaded.'\r\n      )\r\n    );\r\n    dispatch(forceRefreshPage(pagenumber));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setDashboardTitle } from '../DashboardActions';\r\nimport { getDashboardSettings, getDashboardTheme, getDashboardTitle, getPages } from '../DashboardSelectors';\r\nimport { setConnectionModalOpen } from '../../application/ApplicationActions';\r\nimport { applicationGetStandaloneSettings, applicationGetCustomHeader } from '../../application/ApplicationSelectors';\r\nimport { getDashboardIsEditable, getPageNumber } from '../../settings/SettingsSelectors';\r\nimport { NeoDashboardHeaderLogo } from './DashboardHeaderLogo';\r\nimport NeoAboutButton from './DashboardHeaderAboutButton';\r\nimport { NeoLogoutButton } from './DashboardHeaderLogoutButton';\r\nimport { NeoDashboardHeaderDownloadImageButton } from './DashboardHeaderDownloadImageButton';\r\nimport { updateDashboardSetting } from '../../settings/SettingsActions';\r\nimport { DarkModeSwitch } from 'react-toggle-dark-mode';\r\nimport { DASHBOARD_HEADER_BUTTON_COLOR } from '../../config/ApplicationConfig';\r\nimport { Tooltip } from '@mui/material';\r\n\r\nexport const NeoDashboardHeader = ({\r\n  standaloneSettings,\r\n  dashboardTitle,\r\n  customHeader,\r\n  connection,\r\n  settings,\r\n  onConnectionModalOpen,\r\n  onDownloadImage,\r\n  onAboutModalOpen,\r\n  resetApplication,\r\n  themeMode,\r\n  setTheme,\r\n}) => {\r\n  const downloadImageEnabled = settings ? settings.downloadImageEnabled : false;\r\n  const [dashboardTitleText, setDashboardTitleText] = React.useState(dashboardTitle);\r\n\r\n  const [isDarkMode, setDarkMode] = React.useState(themeMode !== 'light');\r\n\r\n  const toggleDarkMode = (checked: boolean) => {\r\n    setDarkMode(checked);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Reset text to the dashboard state when the page gets reorganized.\r\n    if (dashboardTitle !== dashboardTitleText) {\r\n      setDashboardTitleText(dashboardTitle);\r\n    }\r\n  }, [dashboardTitle]);\r\n\r\n  useEffect(() => {\r\n    setTheme(isDarkMode ? 'dark' : 'light');\r\n  }, [isDarkMode]);\r\n  const content = (\r\n    <div className='n-relative n-bg-palette-neutral-bg-weak n-w-full'>\r\n      <div className='n-min-w-full'>\r\n        <div className='n-flex n-justify-between n-h-16 n-items-center n-py-6 md:n-justify-start md:n-space-x-10 n-mx-4'>\r\n          <NeoDashboardHeaderLogo resetApplication={resetApplication} />\r\n          <nav className='n-items-center n-justify-center n-flex n-flex-1 n-w-full n-font-semibold'>\r\n            {customHeader && customHeader.length > 0\r\n              ? `${customHeader}`\r\n              : `${connection.protocol}://${connection.url}:${connection.port}`}\r\n          </nav>\r\n          <div className='sm:n-flex n-items-center n-justify-end md:n-flex-1 lg:n-w-0 n-gap-6'>\r\n            <div className='n-flex n-flex-row n-gap-x-2'>\r\n              <Tooltip title={'Change Theme'} disableInteractive>\r\n                <div>\r\n                  <DarkModeSwitch\r\n                    className={'ndl-icon-btn n-p-2 ndl-large ndl-clean'}\r\n                    style={{}}\r\n                    checked={isDarkMode}\r\n                    onChange={toggleDarkMode}\r\n                    size={24}\r\n                    sunColor={DASHBOARD_HEADER_BUTTON_COLOR || '#000000'}\r\n                    moonColor={'#ff0000'}\r\n                  />\r\n                </div>\r\n              </Tooltip>\r\n\r\n              {downloadImageEnabled && <NeoDashboardHeaderDownloadImageButton onDownloadImage={onDownloadImage} />}\r\n              <NeoAboutButton connection={connection} onAboutModalOpen={onAboutModalOpen} />\r\n              <NeoLogoutButton standaloneSettings={standaloneSettings} onConnectionModalOpen={onConnectionModalOpen} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n  return content;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  dashboardTitle: getDashboardTitle(state),\r\n  standaloneSettings: applicationGetStandaloneSettings(state),\r\n  customHeader: applicationGetCustomHeader(state),\r\n  pages: getPages(state),\r\n  settings: getDashboardSettings(state),\r\n  editable: getDashboardIsEditable(state),\r\n  pagenumber: getPageNumber(state),\r\n  themeMode: getDashboardTheme(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setDashboardTitle: (title: any) => {\r\n    dispatch(setDashboardTitle(title));\r\n  },\r\n\r\n  setTheme: (theme: string) => {\r\n    dispatch(updateDashboardSetting('theme', theme));\r\n  },\r\n\r\n  onConnectionModalOpen: () => {\r\n    dispatch(setConnectionModalOpen(true));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoDashboardHeader);\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IconButton, Menu, MenuItems, MenuItem } from '@neo4j-ndl/react';\r\nimport {\r\n  QuestionMarkCircleIconOutline,\r\n  BookOpenIconOutline,\r\n  InformationCircleIconOutline,\r\n} from '@neo4j-ndl/react/icons';\r\nimport { Tooltip } from '@mui/material';\r\n\r\nimport { DASHBOARD_HEADER_BUTTON_COLOR } from '../../config/ApplicationConfig';\r\nimport StyleConfig from '../../config/StyleConfig';\r\nimport { getDashboardExtensions } from '../DashboardSelectors';\r\nimport { getExampleReports } from '../../extensions/ExtensionUtils';\r\nimport { NeoReportExamplesModal } from '../../modal/ReportExamplesModal';\r\nimport { enterHandler, openTab } from '../../utils/accessibility';\r\n\r\ntype HelpMenuOpenEvent = React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>;\r\n\r\nawait StyleConfig.getInstance();\r\n\r\nexport const NeoAboutButton = ({ connection, onAboutModalOpen, extensions }) => {\r\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\r\n  const handleHelpMenuOpen = (event: HelpMenuOpenEvent) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleHelpMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const menuOpen = Boolean(anchorEl);\r\n\r\n  const menuAboutHandler = (e) => {\r\n    onAboutModalOpen(e);\r\n    handleHelpMenuClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title={'Help and documentation'} disableInteractive>\r\n        <IconButton\r\n          className='logo-btn n-p-1'\r\n          aria-label={'help'}\r\n          style={DASHBOARD_HEADER_BUTTON_COLOR ? { color: DASHBOARD_HEADER_BUTTON_COLOR } : {}}\r\n          size='large'\r\n          onClick={handleHelpMenuOpen}\r\n          clean\r\n        >\r\n          <QuestionMarkCircleIconOutline className='header-icon' type='outline' />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <Menu\r\n        anchorOrigin={{\r\n          horizontal: 'right',\r\n          vertical: 'bottom',\r\n        }}\r\n        transformOrigin={{\r\n          horizontal: 'right',\r\n          vertical: 'top',\r\n        }}\r\n        anchorEl={anchorEl}\r\n        open={menuOpen}\r\n        onClose={handleHelpMenuClose}\r\n        size='large'\r\n      >\r\n        <MenuItems>\r\n          <NeoReportExamplesModal\r\n            extensions={extensions}\r\n            examples={getExampleReports(extensions)}\r\n            database={connection.database}\r\n          ></NeoReportExamplesModal>\r\n          <MenuItem\r\n            onKeyDown={(e) => enterHandler(e, () => openTab('https://neo4j.com/labs/neodash/2.4/user-guide/'))}\r\n            onClick={() => openTab('https://neo4j.com/labs/neodash/2.4/user-guide/')}\r\n            title={'Documentation'}\r\n            icon={<BookOpenIconOutline />}\r\n          />\r\n          <MenuItem\r\n            title={'About'}\r\n            onClick={menuAboutHandler}\r\n            onKeyDown={(e) => enterHandler(e, menuAboutHandler)}\r\n            icon={<InformationCircleIconOutline />}\r\n          />\r\n        </MenuItems>\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  extensions: getDashboardExtensions(state),\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(NeoAboutButton);\r\n","import React from 'react';\r\nimport { IconButton } from '@neo4j-ndl/react';\r\nimport { Tooltip } from '@mui/material';\r\nimport { CameraIconSolid } from '@neo4j-ndl/react/icons';\r\n\r\nimport { DASHBOARD_HEADER_BUTTON_COLOR } from '../../config/ApplicationConfig';\r\nimport StyleConfig from '../../config/StyleConfig';\r\n\r\nawait StyleConfig.getInstance();\r\n\r\nexport const NeoDashboardHeaderDownloadImageButton = (onDownloadImage) => {\r\n  const content = (\r\n    <Tooltip title={'Download Dashboard as Image'} disableInteractive>\r\n      <IconButton\r\n        aria-label={'camera'}\r\n        style={DASHBOARD_HEADER_BUTTON_COLOR ? { color: DASHBOARD_HEADER_BUTTON_COLOR } : {}}\r\n        onClick={() => onDownloadImage()}\r\n        size='large'\r\n        clean\r\n      >\r\n        <CameraIconSolid aria-label={'camera icon'} />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  return content;\r\n};\r\n\r\nexport default NeoDashboardHeaderDownloadImageButton;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@neo4j-ndl/react';\r\nimport { Tooltip } from '@mui/material';\r\n\r\nimport { DASHBOARD_HEADER_BUTTON_COLOR } from '../../config/ApplicationConfig';\r\nimport StyleConfig from '../../config/StyleConfig';\r\nimport { ArrowRightOnRectangleIconOutline } from '@neo4j-ndl/react/icons';\r\n\r\nawait StyleConfig.getInstance();\r\n\r\nexport const NeoLogoutButton = ({ standaloneSettings, onConnectionModalOpen }) => {\r\n  return standaloneSettings.standalone && !standaloneSettings.standaloneMultiDatabase ? (\r\n    <></>\r\n  ) : (\r\n    <Tooltip title={'Log out'} disableInteractive>\r\n      <IconButton\r\n        className='logo-btn n-p-1'\r\n        aria-label={'connection '}\r\n        style={DASHBOARD_HEADER_BUTTON_COLOR ? { color: DASHBOARD_HEADER_BUTTON_COLOR } : {}}\r\n        onClick={() => {\r\n          onConnectionModalOpen();\r\n        }}\r\n        size='large'\r\n        clean\r\n      >\r\n        <ArrowRightOnRectangleIconOutline className='header-icon' type='outline' />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoLogoutButton);\r\n","import React, { useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setDashboardTitle } from '../DashboardActions';\r\nimport { getPages } from '../DashboardSelectors';\r\nimport debounce from 'lodash/debounce';\r\nimport { addPageThunk, movePageThunk } from '../DashboardThunks';\r\nimport { setConnectionModalOpen } from '../../application/ApplicationActions';\r\nimport { setPageNumberThunk } from '../../settings/SettingsThunks';\r\nimport { getDashboardIsEditable, getPageNumber } from '../../settings/SettingsSelectors';\r\nimport { applicationIsStandalone } from '../../application/ApplicationSelectors';\r\nimport { Tabs, IconButton } from '@neo4j-ndl/react';\r\nimport { PlusIconOutline } from '@neo4j-ndl/react/icons';\r\nimport DashboardHeaderPageTitle from './DashboardHeaderPageTitle';\r\nimport { DndContext, useSensor, useSensors } from '@dnd-kit/core';\r\nimport { SortableContext, horizontalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport { KeyboardSensor, MouseSensor } from '../../utils/accessibility';\r\n\r\n/**\r\n * The component responsible for rendering the list of pages, as well as the logic for adding, removing, selecting and updating pages.\r\n */\r\nexport const NeoDashboardHeaderPageList = ({\r\n  // standalone,\r\n  editable,\r\n  pages,\r\n  pagenumber,\r\n  addPage,\r\n  movePage,\r\n  selectPage,\r\n}) => {\r\n  const [canSwitchPages, setCanSwitchPages] = React.useState(true);\r\n\r\n  // We debounce several state changes to improve user experience.\r\n  const debouncedSetCanSwitchPages = useCallback(debounce(setCanSwitchPages, 50), []);\r\n\r\n  const pageAddButton = (\r\n    <IconButton aria-label={'add page'} className='n-relative -n-top-1' size='large' onClick={addPage} clean>\r\n      <PlusIconOutline />\r\n    </IconButton>\r\n  );\r\n\r\n  function handleDragEnd(event) {\r\n    const { active, over } = event;\r\n\r\n    if (!over || !editable) {\r\n      return;\r\n    }\r\n    if (active.id !== over.id) {\r\n      const oldIndex = parseInt(active.id.split('_')[1]);\r\n      const newIndex = parseInt(over.id.split('_')[1]);\r\n      movePage(oldIndex, newIndex);\r\n    }\r\n\r\n    debouncedSetCanSwitchPages(true);\r\n  }\r\n\r\n  const mouseSensor = useSensor(MouseSensor, {\r\n    activationConstraint: {\r\n      distance: 5, // Enable sort function when dragging 10px\r\n    },\r\n  });\r\n\r\n  const keySensor = useSensor(KeyboardSensor, {\r\n    keyboardCodes: {\r\n      start: ['Space'],\r\n      cancel: ['Escape'],\r\n      end: ['Space'],\r\n    },\r\n  });\r\n\r\n  const sensors = useSensors(mouseSensor, keySensor);\r\n\r\n  const content = (\r\n    <div className='n-flex n-flex-row n-w-full'>\r\n      <Tabs fill='underline' onChange={(tabId) => (canSwitchPages ? selectPage(tabId) : null)} value={pagenumber}>\r\n        <DndContext onDragEnd={handleDragEnd} sensors={sensors}>\r\n          <SortableContext items={pages} strategy={horizontalListSortingStrategy}>\r\n            {pages.map((page, i) => (\r\n              <DashboardHeaderPageTitle\r\n                title={page.title}\r\n                tabIndex={i}\r\n                key={`DashboardHeaderPageTitle_${i}`}\r\n                disabled={!editable}\r\n              />\r\n            ))}\r\n          </SortableContext>\r\n        </DndContext>\r\n      </Tabs>\r\n      {editable && pageAddButton}\r\n    </div>\r\n  );\r\n  return content;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  standalone: applicationIsStandalone(state),\r\n  pages: getPages(state),\r\n  editable: getDashboardIsEditable(state),\r\n  pagenumber: getPageNumber(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setDashboardTitle: (title: any) => {\r\n    dispatch(setDashboardTitle(title));\r\n  },\r\n  selectPage: (number: any) => {\r\n    dispatch(setPageNumberThunk(number));\r\n  },\r\n  addPage: () => {\r\n    dispatch(addPageThunk());\r\n  },\r\n  movePage: (oldIndex: number, newIndex: number) => {\r\n    dispatch(movePageThunk(oldIndex, newIndex));\r\n  },\r\n  onConnectionModalOpen: () => {\r\n    dispatch(setConnectionModalOpen(true));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoDashboardHeaderPageList);\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classnames from 'classnames';\r\nimport debounce from 'lodash/debounce';\r\nimport { setPageTitle } from '../../page/PageActions';\r\nimport { removePageThunk } from '../DashboardThunks';\r\nimport { Tab, Menu, MenuItems, MenuItem, IconButton } from '@neo4j-ndl/react';\r\nimport { EllipsisHorizontalIconOutline, PencilIconOutline, TrashIconOutline } from '@neo4j-ndl/react/icons';\r\nimport { NeoDeletePageModal } from '../../modal/DeletePageModal';\r\nimport { useSortable } from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\ntype MenuEditEvent = React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>;\r\n\r\nexport const DashboardHeaderPageTitle = ({ title, tabIndex, removePage, setPageTitle, disabled = false }) => {\r\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\r\n  const menuOpen = Boolean(anchorEl);\r\n  const [deleteModalOpen, setDeleteModalOpen] = React.useState(false);\r\n  const [editing, setEditing] = React.useState(false);\r\n  const [inputWidth, setInputWidth] = React.useState(125);\r\n  const handleMenuEditClick = (event: MenuEditEvent) => {\r\n    event.preventDefault();\r\n    setEditing(!editing);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleDeleteModalClose = () => {\r\n    setAnchorEl(null);\r\n    setDeleteModalOpen(false);\r\n  };\r\n\r\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging, isSorting } = useSortable({\r\n    id: `tab_${tabIndex}`,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Reset text to the dashboard state when the page gets reorganized.\r\n    if ((isDragging || isSorting) && editing) {\r\n      setEditing(false);\r\n    }\r\n    setAnchorEl(null);\r\n  }, [isDragging, isSorting]);\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n  };\r\n\r\n  const debouncedSetPageTitle = useCallback(debounce(setPageTitle, 200), []);\r\n\r\n  const [titleText, setTitleText] = React.useState(title);\r\n  useEffect(() => {\r\n    // Reset text to the dashboard state when the page gets reorganized.\r\n    if (titleText !== title) {\r\n      setTitleText(title);\r\n    }\r\n  }, [title]);\r\n\r\n  const content = (\r\n    <div className='n-inline-flex' ref={setNodeRef} style={style} id={`tab_${tabIndex}`} {...attributes} {...listeners}>\r\n      <Tab tabId={tabIndex} key={tabIndex}>\r\n        {!editing ? (\r\n          title ? (\r\n            title\r\n          ) : (\r\n            '(no title)'\r\n          )\r\n        ) : (\r\n          <form\r\n            onSubmit={(event) => {\r\n              if (editing) {\r\n                handleMenuEditClick(event);\r\n              }\r\n            }}\r\n          >\r\n            <input\r\n              data-no-dnd='true'\r\n              autoFocus={true}\r\n              value={titleText}\r\n              className=''\r\n              onBlur={(event) => {\r\n                if (editing) {\r\n                  handleMenuEditClick(event);\r\n                }\r\n              }}\r\n              onChange={(event) => {\r\n                const { target } = event;\r\n                target.style.width = '125px';\r\n                setInputWidth(target.scrollWidth);\r\n\r\n                if (disabled) {\r\n                  return;\r\n                }\r\n                setTitleText(event.target.value);\r\n                debouncedSetPageTitle(tabIndex, event.target.value);\r\n              }}\r\n              style={{\r\n                height: '1.9rem',\r\n                marginBottom: -5,\r\n                width: inputWidth,\r\n                paddingLeft: 5,\r\n                paddingRight: 5,\r\n              }}\r\n              placeholder='Page name...'\r\n            />\r\n          </form>\r\n        )}\r\n        {!disabled && !editing && (\r\n          <>\r\n            <IconButton\r\n              aria-label='Page actions'\r\n              className={classnames('n-relative n-top-1 visible-on-tab-hover', {\r\n                'open-menu': menuOpen,\r\n              })}\r\n              style={{ height: '1.1rem' }}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setAnchorEl(e.currentTarget);\r\n              }}\r\n              size='small'\r\n              clean\r\n            >\r\n              <EllipsisHorizontalIconOutline />\r\n            </IconButton>\r\n            <Menu anchorEl={anchorEl} open={menuOpen} onClose={() => setAnchorEl(null)}>\r\n              <MenuItems>\r\n                <MenuItem\r\n                  icon={<PencilIconOutline />}\r\n                  title={'Edit name'}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    if (editing) {\r\n                      debouncedSetPageTitle(tabIndex, titleText);\r\n                    }\r\n                    !disabled && handleMenuEditClick(e);\r\n                  }}\r\n                />\r\n                <MenuItem\r\n                  className='n-text-palette-danger-text'\r\n                  icon={<TrashIconOutline />}\r\n                  title='Delete'\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    !disabled && setDeleteModalOpen(true);\r\n                  }}\r\n                />\r\n              </MenuItems>\r\n            </Menu>\r\n          </>\r\n        )}\r\n      </Tab>\r\n      <NeoDeletePageModal\r\n        modalOpen={deleteModalOpen}\r\n        onRemove={() => removePage(tabIndex)}\r\n        handleClose={handleDeleteModalClose}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return content;\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setPageTitle: (number: any, title: any) => {\r\n    dispatch(setPageTitle(number, title));\r\n  },\r\n  removePage: (index: any) => {\r\n    dispatch(removePageThunk(index));\r\n  },\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(DashboardHeaderPageTitle);\r\n","import React, { Suspense, useCallback, useEffect, useState } from 'react';\r\nimport debounce from 'lodash/debounce';\r\nimport { connect } from 'react-redux';\r\nimport { setDashboardTitle } from '../DashboardActions';\r\nimport { applicationGetConnection, applicationGetStandaloneSettings } from '../../application/ApplicationSelectors';\r\nimport { getDashboardTitle, getDashboardExtensions, getDashboardSettings } from '../DashboardSelectors';\r\nimport { getDashboardIsEditable } from '../../settings/SettingsSelectors';\r\nimport { updateDashboardSetting } from '../../settings/SettingsActions';\r\nimport { Typography, IconButton, Menu, MenuItems, TextInput } from '@neo4j-ndl/react';\r\nimport {\r\n  CheckBadgeIconOutline,\r\n  CheckIconOutline,\r\n  EllipsisHorizontalIconOutline,\r\n  PencilSquareIconOutline,\r\n} from '@neo4j-ndl/react/icons';\r\nimport NeoSettingsModal from '../../settings/SettingsModal';\r\nimport NeoExtensionsModal from '../../extensions/ExtensionsModal';\r\nimport { EXTENSIONS_DRAWER_BUTTONS } from '../../extensions/ExtensionConfig';\r\nimport { Tooltip } from '@mui/material';\r\nimport NeoExportModal from '../../modal/ExportModal';\r\nimport { setDraft } from '../../application/ApplicationActions';\r\n\r\ntype SettingsMenuOpenEvent = React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>;\r\n\r\nexport const NeoDashboardTitle = ({\r\n  dashboardTitle,\r\n  setDashboardTitle,\r\n  editable,\r\n  standaloneSettings,\r\n  dashboardSettings,\r\n  extensions,\r\n  updateDashboardSetting,\r\n  connection,\r\n}) => {\r\n  const [dashboardTitleText, setDashboardTitleText] = React.useState(dashboardTitle);\r\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null);\r\n  const [editing, setEditing] = React.useState(false);\r\n  const debouncedDashboardTitleUpdate = useCallback(debounce(setDashboardTitle, 250), []);\r\n  const [inputWidth, setInputWidth] = React.useState(350);\r\n  const handleSettingsMenuOpen = (event: SettingsMenuOpenEvent) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleSettingsMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const menuOpen = Boolean(anchorEl);\r\n\r\n  /**\r\n   * Function to render dynamically the buttons in the drawer related to all the extension that\r\n   * are enabled and present a button (EX: node-sidebar)\r\n   * @returns JSX element containing all the buttons related to their enabled extensions\r\n   */\r\n  function renderExtensionsButtons() {\r\n    const res = (\r\n      <>\r\n        {Object.keys(EXTENSIONS_DRAWER_BUTTONS).map((name) => {\r\n          const Component = extensions[name] ? EXTENSIONS_DRAWER_BUTTONS[name] : '';\r\n          return Component ? <Component key={`ext-${name}`} database={connection.database} /> : <></>;\r\n        })}\r\n      </>\r\n    );\r\n    return res;\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.title = dashboardTitle ? `NeoDash - ${dashboardTitle}` : 'NeoDash - Neo4j Dashboard Builder';\r\n    // Reset text to the dashboard state when the page gets reorganized.\r\n    if (dashboardTitle !== dashboardTitleText) {\r\n      setDashboardTitleText(dashboardTitle);\r\n    }\r\n  }, [dashboardTitle]);\r\n  return (\r\n    <div className='n-flex n-flex-row n-flex-wrap n-justify-between n-items-center'>\r\n      {/* TODO : Replace with editable field if dashboard is editable */}\r\n      {/* only allow edit title if dashboard is not standalone - here we are in Title edit mode*/}\r\n      {editing && !standaloneSettings.standalone ? (\r\n        <div className={'n-flex n-flex-row n-flex-wrap n-justify-between n-items-center'}>\r\n          <form\r\n            onSubmit={() => {\r\n              if (editing) {\r\n                setEditing(false);\r\n              }\r\n            }}\r\n          >\r\n            <input\r\n              autoFocus={true}\r\n              value={dashboardTitleText}\r\n              style={{\r\n                height: '1.9rem',\r\n                fontSize: '1.875rem', // h3\r\n                fontWeight: 700, // h3\r\n                padding: 10,\r\n                width: inputWidth,\r\n              }}\r\n              placeholder='Dashboard name...'\r\n              onBlur={() => {\r\n                if (editing) {\r\n                  setEditing(false);\r\n                }\r\n              }}\r\n              onChange={(event) => {\r\n                if (editable) {\r\n                  const { target } = event;\r\n                  target.style.width = '350px';\r\n                  setInputWidth(target.scrollWidth);\r\n                  setDashboardTitleText(event.target.value);\r\n                  debouncedDashboardTitleUpdate(event.target.value);\r\n                }\r\n              }}\r\n            />\r\n          </form>\r\n          <Tooltip title={'Stop Editing'} disableInteractive>\r\n            <IconButton\r\n              className='logo-btn n-p-1'\r\n              aria-label={'stop-editing'}\r\n              size='large'\r\n              onClick={() => setEditing(false)}\r\n              clean\r\n            >\r\n              <CheckIconOutline className='header-icon' type='outline' />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </div>\r\n      ) : !standaloneSettings.standalone /* out of edit mode - if Not Standalone we display the edit button */ ? (\r\n        <div className={'n-flex n-flex-row n-flex-wrap n-justify-between n-items-center'}>\r\n          <Typography variant='h3'>{dashboardTitle ? dashboardTitle : '(no title)'}</Typography>\r\n          <Tooltip title={'Edit'} disableInteractive>\r\n            {editable ? (\r\n              <IconButton\r\n                className='logo-btn n-p-1'\r\n                aria-label={'edit'}\r\n                size='large'\r\n                onClick={() => setEditing(true)}\r\n                clean\r\n              >\r\n                <PencilSquareIconOutline className='header-icon' type='outline' />\r\n              </IconButton>\r\n            ) : (\r\n              <></>\r\n            )}\r\n          </Tooltip>\r\n        </div>\r\n      ) : (\r\n        /* if we are in Standalone just title is displayed with no edit button */\r\n        <div className={'n-flex n-flex-row n-flex-wrap n-justify-between n-items-center'}>\r\n          <Typography variant='h3'>{dashboardTitle}</Typography>\r\n        </div>\r\n      )}\r\n      {/* If the app is not running in standalone mode (i.e. in edit mode) always show dashboard settings. */}\r\n      {!standaloneSettings.standalone ? (\r\n        <div className='flex flex-row flex-wrap items-center gap-2'>\r\n          {editable ? renderExtensionsButtons() : <></>}\r\n          <NeoSettingsModal dashboardSettings={dashboardSettings} updateDashboardSetting={updateDashboardSetting} />\r\n          {editable ? <NeoExportModal /> : <></>}\r\n          {editable ? <NeoExtensionsModal closeMenu={handleSettingsMenuClose} /> : <></>}\r\n        </div>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  dashboardTitle: getDashboardTitle(state),\r\n  editable: getDashboardIsEditable(state),\r\n  standaloneSettings: applicationGetStandaloneSettings(state),\r\n  dashboardSettings: getDashboardSettings(state),\r\n  extensions: getDashboardExtensions(state),\r\n  connection: applicationGetConnection(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setDashboardTitle: (title: any) => {\r\n    dispatch(setDashboardTitle(title));\r\n  },\r\n  updateDashboardSetting: (setting, value) => {\r\n    dispatch(setDraft(true));\r\n    dispatch(updateDashboardSetting(setting, value));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoDashboardTitle);\r\n","import React, { useContext, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getDashboardIsEditable, getPageNumber } from '../../settings/SettingsSelectors';\r\nimport { getDashboardSettings, getDashboardTitle } from '../DashboardSelectors';\r\nimport { Button, SideNavigation, SideNavigationGroupHeader, SideNavigationList, TextInput } from '@neo4j-ndl/react';\r\nimport { removeReportThunk } from '../../page/PageThunks';\r\nimport {\r\n  PlusIconOutline,\r\n  MagnifyingGlassIconOutline,\r\n  CircleStackIconOutline,\r\n  ArrowPathIconOutline,\r\n} from '@neo4j-ndl/react/icons';\r\n\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { DashboardSidebarListItem } from './DashboardSidebarListItem';\r\nimport {\r\n  applicationGetConnection,\r\n  applicationGetConnectionDatabase,\r\n  applicationGetStandaloneSettings,\r\n  applicationIsStandalone,\r\n  dashboardIsDraft,\r\n} from '../../application/ApplicationSelectors';\r\nimport { setDraft } from '../../application/ApplicationActions';\r\nimport NeoDashboardSidebarLoadModal from './modal/DashboardSidebarLoadModal';\r\nimport { resetDashboardState } from '../DashboardActions';\r\nimport NeoDashboardSidebarCreateModal from './modal/DashboardSidebarCreateModal';\r\nimport NeoDashboardSidebarDatabaseMenu from './menu/DashboardSidebarDatabaseMenu';\r\nimport NeoDashboardSidebarDashboardMenu from './menu/DashboardSidebarDashboardMenu';\r\nimport {\r\n  deleteDashboardFromNeo4jThunk,\r\n  loadDashboardFromNeo4jThunk,\r\n  loadDashboardListFromNeo4jThunk,\r\n  loadDashboardThunk,\r\n  loadDatabaseListFromNeo4jThunk,\r\n  saveDashboardToNeo4jThunk,\r\n} from '../DashboardThunks';\r\nimport { Neo4jContext, Neo4jContextState } from 'use-neo4j/dist/neo4j.context';\r\nimport NeoDashboardSidebarSaveModal from './modal/DashboardSidebarSaveModal';\r\nimport { getDashboardJson } from '../../modal/ModalSelectors';\r\nimport NeoDashboardSidebarCreateMenu from './menu/DashboardSidebarCreateMenu';\r\nimport NeoDashboardSidebarImportModal from './modal/DashboardSidebarImportModal';\r\nimport { createUUID } from '../../utils/uuid';\r\nimport NeoDashboardSidebarExportModal from './modal/DashboardSidebarExportModal';\r\nimport NeoDashboardSidebarDeleteModal from './modal/DashboardSidebarDeleteModal';\r\nimport NeoDashboardSidebarInfoModal from './modal/DashboardSidebarInfoModal';\r\nimport NeoDashboardSidebarShareModal from './modal/DashboardSidebarShareModal';\r\nimport NeoDashboardSidebarAccessModal from './modal/DashboardSidebarAccessModal';\r\nimport LegacyShareModal from './modal/legacy/LegacyShareModal';\r\nimport { NEODASH_VERSION } from '../DashboardReducer';\r\n\r\n// Which (small) pop-up menu is currently open for the sidebar.\r\nenum Menu {\r\n  DASHBOARD = 0,\r\n  DATABASE = 1,\r\n  CREATE = 2,\r\n  NONE = 3,\r\n}\r\n\r\n// Which (large) pop-up modal is currently open for the sidebar.\r\nenum Modal {\r\n  CREATE = 0,\r\n  IMPORT = 1,\r\n  EXPORT = 2,\r\n  DELETE = 3,\r\n  SHARE = 4,\r\n  SHARE_LEGACY = 5,\r\n  INFO = 6,\r\n  LOAD = 7,\r\n  SAVE = 8,\r\n  NONE = 9,\r\n  ACCESS = 10,\r\n}\r\n\r\n// We use \"index = -1\" to represent a non-saved draft dashboard in the sidebar's dashboard list.\r\nconst UNSAVED_DASHBOARD_INDEX = -1;\r\n\r\n/**\r\n * A component responsible for rendering the sidebar on the left of the screen.\r\n */\r\nexport const NeoDashboardSidebar = ({\r\n  database,\r\n  connection,\r\n  title,\r\n  readonly,\r\n  draft,\r\n  setDraft,\r\n  dashboard,\r\n  resetLocalDashboard,\r\n  loadDashboard,\r\n  loadDatabaseListFromNeo4j,\r\n  loadDashboardListFromNeo4j,\r\n  loadDashboardFromNeo4j,\r\n  saveDashboardToNeo4j,\r\n  deleteDashboardFromNeo4j,\r\n  standaloneSettings,\r\n}) => {\r\n  const { driver } = useContext<Neo4jContextState>(Neo4jContext);\r\n  const [expanded, setOnExpanded] = useState(false);\r\n  const [selectedDashboardIndex, setSelectedDashboardIndex] = React.useState(UNSAVED_DASHBOARD_INDEX);\r\n  const [dashboardDatabase, setDashboardDatabase] = React.useState(database ? database : 'neo4j');\r\n  const [databases, setDatabases] = useState([]);\r\n  const [inspectedIndex, setInspectedIndex] = useState(UNSAVED_DASHBOARD_INDEX);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [menuAnchor, setMenuAnchor] = useState<HTMLElement | null>(null);\r\n  const [menuOpen, setMenuOpen] = useState(Menu.NONE);\r\n  const [modalOpen, setModalOpen] = useState(Modal.NONE);\r\n  const [dashboards, setDashboards] = React.useState([]);\r\n  const [cachedDashboard, setCachedDashboard] = React.useState('');\r\n\r\n  const getDashboardListFromNeo4j = () => {\r\n    // Retrieves list of all dashboards stored in a given database.\r\n    loadDashboardListFromNeo4j(driver, dashboardDatabase, (list) => {\r\n      setDashboards(list);\r\n\r\n      // Update the UI to reflect the currently selected dashboard.\r\n      if (dashboard && dashboard.uuid) {\r\n        const index = list.findIndex((element) => element.uuid == dashboard.uuid);\r\n        setSelectedDashboardIndex(index);\r\n        if (index == UNSAVED_DASHBOARD_INDEX) {\r\n          // If we can't find the currently dashboard in the database, we are drafting a new one.\r\n          setDraft(true);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  function createDashboard() {\r\n    // Creates new dashboard in draft state (not yet saved to Neo4j)\r\n    resetLocalDashboard();\r\n    setDraft(true);\r\n  }\r\n\r\n  function deleteDashboard(uuid) {\r\n    // Creates new dashboard in draft state (not yet saved to Neo4j)\r\n    deleteDashboardFromNeo4j(driver, dashboardDatabase, uuid, () => {\r\n      if (uuid == dashboard.uuid) {\r\n        setSelectedDashboardIndex(UNSAVED_DASHBOARD_INDEX);\r\n        resetLocalDashboard();\r\n        loadDashboardListFromNeo4j();\r\n        setDraft(true);\r\n      }\r\n      setTimeout(() => {\r\n        getDashboardListFromNeo4j();\r\n      }, 100);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <NeoDashboardSidebarSaveModal\r\n        open={modalOpen == Modal.SAVE}\r\n        onConfirm={() => {\r\n          saveDashboardToNeo4j(\r\n            driver,\r\n            dashboardDatabase,\r\n            dashboard,\r\n            new Date().toISOString(),\r\n            connection.username,\r\n            () => {\r\n              // After saving successfully, refresh the list after a small delay.\r\n              // The new dashboard will always be on top (the latest), so we select index 0.\r\n              setDashboards([]);\r\n              setTimeout(() => {\r\n                getDashboardListFromNeo4j();\r\n                setSelectedDashboardIndex(0);\r\n                setDraft(false);\r\n              }, 100);\r\n            }\r\n          );\r\n        }}\r\n        overwrite={selectedDashboardIndex >= 0}\r\n        handleClose={() => setModalOpen(Modal.NONE)}\r\n      />\r\n\r\n      <NeoDashboardSidebarLoadModal\r\n        open={modalOpen == Modal.LOAD}\r\n        onConfirm={() => {\r\n          if (inspectedIndex == UNSAVED_DASHBOARD_INDEX) {\r\n            // Someone attempted to load the unsaved draft dashboard... this isn't possible, we create a fresh one.\r\n            setSelectedDashboardIndex(UNSAVED_DASHBOARD_INDEX);\r\n            createDashboard();\r\n          } else {\r\n            // Load one of the dashboards from the database.\r\n            setModalOpen(Modal.LOAD);\r\n            const { uuid } = dashboards[inspectedIndex];\r\n            loadDashboardFromNeo4j(driver, dashboardDatabase, uuid, (file) => {\r\n              setDraft(false);\r\n              loadDashboard(uuid, file);\r\n              setSelectedDashboardIndex(inspectedIndex);\r\n            });\r\n          }\r\n        }}\r\n        handleClose={() => setModalOpen(Modal.NONE)}\r\n      />\r\n\r\n      <NeoDashboardSidebarShareModal\r\n        connection={connection}\r\n        uuid={dashboards[inspectedIndex] && dashboards[inspectedIndex].uuid}\r\n        dashboardDatabase={dashboardDatabase}\r\n        open={modalOpen == Modal.SHARE}\r\n        onConfirm={() => {\r\n          setModalOpen(Modal.NONE);\r\n        }}\r\n        onLegacyShareClicked={() => setModalOpen(Modal.SHARE_LEGACY)}\r\n        handleClose={() => setModalOpen(Modal.NONE)}\r\n      />\r\n\r\n      <LegacyShareModal open={modalOpen == Modal.SHARE_LEGACY} handleClose={() => setModalOpen(Modal.NONE)} />\r\n\r\n      <NeoDashboardSidebarCreateModal\r\n        open={modalOpen == Modal.CREATE}\r\n        onConfirm={() => {\r\n          setModalOpen(Modal.NONE);\r\n          createDashboard();\r\n          setSelectedDashboardIndex(UNSAVED_DASHBOARD_INDEX);\r\n        }}\r\n        handleClose={() => setModalOpen(Modal.NONE)}\r\n      />\r\n\r\n      <NeoDashboardSidebarDeleteModal\r\n        open={modalOpen == Modal.DELETE}\r\n        title={dashboards[inspectedIndex] && dashboards[inspectedIndex].title}\r\n        onConfirm={() => {\r\n          setModalOpen(Modal.NONE);\r\n          if (dashboards[inspectedIndex]) {\r\n            deleteDashboard(dashboards[inspectedIndex].uuid);\r\n          }\r\n        }}\r\n        handleClose={() => setModalOpen(Modal.NONE)}\r\n      />\r\n\r\n      <NeoDashboardSidebarImportModal\r\n        open={modalOpen == Modal.IMPORT}\r\n        onImport={(text) => {\r\n          setModalOpen(Modal.NONE);\r\n          setDraft(true);\r\n          setSelectedDashboardIndex(UNSAVED_DASHBOARD_INDEX);\r\n          loadDashboard(createUUID(), text);\r\n        }}\r\n        handleClose={() => setModalOpen(Modal.NONE)}\r\n      />\r\n\r\n      <NeoDashboardSidebarInfoModal\r\n        open={modalOpen == Modal.INFO}\r\n        dashboard={dashboards[inspectedIndex]}\r\n        handleClose={() => {\r\n          setModalOpen(Modal.NONE);\r\n          setCachedDashboard('');\r\n        }}\r\n      />\r\n\r\n      <NeoDashboardSidebarExportModal\r\n        open={modalOpen == Modal.EXPORT}\r\n        dashboard={cachedDashboard}\r\n        handleClose={() => {\r\n          setModalOpen(Modal.NONE);\r\n          setCachedDashboard('');\r\n        }}\r\n      />\r\n\r\n      <NeoDashboardSidebarAccessModal\r\n        open={modalOpen == Modal.ACCESS}\r\n        database={dashboardDatabase}\r\n        dashboard={dashboards[inspectedIndex]}\r\n        handleClose={() => {\r\n          setModalOpen(Modal.NONE);\r\n          setCachedDashboard('');\r\n        }}\r\n      />\r\n\r\n      <SideNavigation\r\n        position='left'\r\n        type='overlay'\r\n        expanded={expanded}\r\n        onExpandedChange={(open) => {\r\n          setOnExpanded(open);\r\n          if (open) {\r\n            getDashboardListFromNeo4j();\r\n          }\r\n          // Wait until the sidebar has fully opened. Then trigger a resize event to align the grid layout.\r\n          const timeout = setTimeout(() => {\r\n            window.dispatchEvent(new Event('resize'));\r\n          }, 300);\r\n        }}\r\n      >\r\n        <SideNavigationList>\r\n          <NeoDashboardSidebarDatabaseMenu\r\n            databases={databases}\r\n            selected={dashboardDatabase}\r\n            setSelected={(newDatabase) => {\r\n              setDashboardDatabase(newDatabase);\r\n              // We changed the active dashboard database, reload the list in the sidebar.\r\n              loadDashboardListFromNeo4j(driver, newDatabase, (list) => {\r\n                setDashboards(list);\r\n                if (!readonly) {\r\n                  setDraft(true);\r\n                }\r\n              });\r\n            }}\r\n            open={menuOpen == Menu.DATABASE}\r\n            anchorEl={menuAnchor}\r\n            handleClose={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setMenuAnchor(null);\r\n            }}\r\n          />\r\n          <NeoDashboardSidebarDashboardMenu\r\n            draft={draft && selectedDashboardIndex == inspectedIndex}\r\n            open={menuOpen == Menu.DASHBOARD}\r\n            anchorEl={menuAnchor}\r\n            handleInfoClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              const d = dashboards[inspectedIndex];\r\n              loadDashboardFromNeo4j(driver, dashboardDatabase, d.uuid, (text) => {\r\n                setCachedDashboard(JSON.parse(text));\r\n              });\r\n              setModalOpen(Modal.INFO);\r\n            }}\r\n            handleDiscardClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setModalOpen(Modal.LOAD);\r\n            }}\r\n            handleSaveClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setModalOpen(Modal.SAVE);\r\n            }}\r\n            handleLoadClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              if (draft) {\r\n                setModalOpen(Modal.LOAD);\r\n              } else {\r\n                const d = dashboards[inspectedIndex];\r\n                loadDashboardFromNeo4j(driver, dashboardDatabase, d.uuid, (file) => {\r\n                  loadDashboard(d.uuid, file);\r\n                  setSelectedDashboardIndex(inspectedIndex);\r\n                });\r\n              }\r\n            }}\r\n            handleExportClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              const d = dashboards[inspectedIndex];\r\n              loadDashboardFromNeo4j(driver, dashboardDatabase, d.uuid, (text) => {\r\n                setCachedDashboard(JSON.parse(text));\r\n              });\r\n              setModalOpen(Modal.EXPORT);\r\n            }}\r\n            handleShareClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setModalOpen(Modal.SHARE);\r\n            }}\r\n            handleAccessClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setModalOpen(Modal.ACCESS);\r\n            }}\r\n            handleDeleteClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setModalOpen(Modal.DELETE);\r\n            }}\r\n            handleClose={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setMenuAnchor(null);\r\n            }}\r\n          />\r\n\r\n          <NeoDashboardSidebarCreateMenu\r\n            open={menuOpen == Menu.CREATE}\r\n            anchorEl={menuAnchor}\r\n            handleNewClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              if (draft) {\r\n                setModalOpen(Modal.CREATE);\r\n              } else {\r\n                setSelectedDashboardIndex(UNSAVED_DASHBOARD_INDEX);\r\n                createDashboard();\r\n              }\r\n            }}\r\n            handleImportClicked={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setModalOpen(Modal.IMPORT);\r\n            }}\r\n            handleClose={() => {\r\n              setMenuOpen(Menu.NONE);\r\n              setMenuAnchor(null);\r\n            }}\r\n          />\r\n\r\n          <SideNavigationGroupHeader>\r\n            <div style={{ display: 'inline-block', width: '100%' }}>\r\n              <span className='n-text-palette-neutral-text-weak' style={{ lineHeight: '28px' }}>\r\n                Dashboards\r\n              </span>\r\n              <Tooltip title='Refresh' aria-label='refresh' disableInteractive>\r\n                <Button\r\n                  aria-label={'refresh'}\r\n                  fill='text'\r\n                  size='small'\r\n                  color='neutral'\r\n                  style={{\r\n                    float: 'right',\r\n                    marginLeft: '3px',\r\n                    marginRight: '12px',\r\n                    paddingLeft: 0,\r\n                    paddingRight: '3px',\r\n                  }}\r\n                  onClick={() => {\r\n                    getDashboardListFromNeo4j();\r\n                    // When reloading, if the dashboard is not in DRAFT mode, we can directly refresh it.\r\n                    if (!draft) {\r\n                      const d = dashboards[selectedDashboardIndex];\r\n                      loadDashboardFromNeo4j(driver, dashboardDatabase, d.uuid, (file) => {\r\n                        loadDashboard(d.uuid, file);\r\n                      });\r\n                    }\r\n                  }}\r\n                >\r\n                  <ArrowPathIconOutline className='btn-icon-base-r-m' />\r\n                </Button>\r\n              </Tooltip>\r\n              {/* Only let users create dashboards and change database when running in editor mode. */}\r\n              {!readonly || (readonly && standaloneSettings.standaloneLoadFromOtherDatabases) ? (\r\n                <>\r\n                  <Tooltip title='Database' aria-label='database' disableInteractive>\r\n                    <Button\r\n                      aria-label={'settings'}\r\n                      fill='text'\r\n                      size='small'\r\n                      color='neutral'\r\n                      style={{\r\n                        float: 'right',\r\n                        marginLeft: '0px',\r\n                        marginRight: '3px',\r\n                        paddingLeft: 0,\r\n                        paddingRight: '3px',\r\n                      }}\r\n                      onClick={(event) => {\r\n                        setMenuOpen(Menu.DATABASE);\r\n                        // Only when not yet retrieved, and needed, get the list of databases from Neo4j.\r\n                        if (databases.length == 0) {\r\n                          loadDatabaseListFromNeo4j(driver, (result) => {\r\n                            if (\r\n                              readonly &&\r\n                              standaloneSettings.standaloneMultiDatabase &&\r\n                              standaloneSettings.standaloneDatabaseList\r\n                            ) {\r\n                              let tmp = standaloneSettings.standaloneDatabaseList.split(',').map((x) => x.trim());\r\n                              result = result.filter((value) => tmp.includes(value));\r\n                            }\r\n                            setDatabases(result);\r\n                          });\r\n                        }\r\n                        setMenuAnchor(event.currentTarget);\r\n                      }}\r\n                    >\r\n                      <CircleStackIconOutline className='btn-icon-base-r' />\r\n                    </Button>\r\n                  </Tooltip>\r\n\r\n                  {!readonly ? (\r\n                    <Tooltip title='Create' aria-label='create' disableInteractive>\r\n                      <Button\r\n                        aria-label={'new dashboard'}\r\n                        fill='text'\r\n                        size='small'\r\n                        color='neutral'\r\n                        style={{\r\n                          float: 'right',\r\n                          marginLeft: '0px',\r\n                          marginRight: '5px',\r\n                          paddingLeft: 0,\r\n                          paddingRight: '3px',\r\n                        }}\r\n                        onClick={(event) => {\r\n                          setMenuAnchor(event.currentTarget);\r\n                          setMenuOpen(Menu.CREATE);\r\n                        }}\r\n                      >\r\n                        <PlusIconOutline className='btn-icon-base-r' />\r\n                      </Button>\r\n                    </Tooltip>\r\n                  ) : (\r\n                    <></>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <></>\r\n              )}\r\n            </div>\r\n          </SideNavigationGroupHeader>\r\n        </SideNavigationList>\r\n        <SideNavigationList>\r\n          <SideNavigationGroupHeader style={{ marginBottom: '10px' }}>\r\n            <TextInput\r\n              fluid\r\n              size='small'\r\n              leftIcon={<MagnifyingGlassIconOutline style={{ height: 16, marginTop: '2px' }} />}\r\n              className='n-w-full n-mr-2'\r\n              placeholder='Search...'\r\n              aria-label='Search'\r\n              value={searchText}\r\n              onChange={(e) => setSearchText(e.target.value)}\r\n            />\r\n          </SideNavigationGroupHeader>\r\n          {draft && selectedDashboardIndex == UNSAVED_DASHBOARD_INDEX && !readonly ? (\r\n            <DashboardSidebarListItem\r\n              version={NEODASH_VERSION}\r\n              selected={draft}\r\n              title={title}\r\n              saved={false}\r\n              onSelect={() => {}}\r\n              onSettingsOpen={(event) => {\r\n                setInspectedIndex(UNSAVED_DASHBOARD_INDEX);\r\n                setMenuOpen(Menu.DASHBOARD);\r\n                setMenuAnchor(event.currentTarget);\r\n              }}\r\n            />\r\n          ) : (\r\n            <></>\r\n          )}\r\n          {dashboards\r\n            .filter((d) => d.title.toLowerCase().includes(searchText.toLowerCase()))\r\n            .map((d) => {\r\n              // index stored in list\r\n              return (\r\n                <DashboardSidebarListItem\r\n                  selected={selectedDashboardIndex == d.index}\r\n                  title={draft && selectedDashboardIndex == d.index ? title : d.title}\r\n                  version={d.version}\r\n                  saved={!(draft && selectedDashboardIndex == d.index)}\r\n                  readonly={readonly}\r\n                  onSelect={() => {\r\n                    if (draft && d.index !== selectedDashboardIndex) {\r\n                      setInspectedIndex(d.index);\r\n                      setModalOpen(Modal.LOAD);\r\n                    } else {\r\n                      loadDashboardFromNeo4j(driver, dashboardDatabase, d.uuid, (file) => {\r\n                        loadDashboard(d.uuid, file);\r\n                        setSelectedDashboardIndex(d.index);\r\n                      });\r\n                    }\r\n                  }}\r\n                  onSettingsOpen={(event) => {\r\n                    setInspectedIndex(d.index);\r\n                    setMenuOpen(Menu.DASHBOARD);\r\n                    setMenuAnchor(event.currentTarget);\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n        </SideNavigationList>\r\n      </SideNavigation>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  readonly: applicationIsStandalone(state),\r\n  connection: applicationGetConnection(state),\r\n  pagenumber: getPageNumber(state),\r\n  title: getDashboardTitle(state),\r\n  editable: getDashboardIsEditable(state),\r\n  draft: dashboardIsDraft(state),\r\n  dashboard: getDashboardJson(state),\r\n  dashboardSettings: getDashboardSettings(state),\r\n  database: applicationGetConnectionDatabase(state),\r\n  standaloneSettings: applicationGetStandaloneSettings(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onRemovePressed: (id) => dispatch(removeReportThunk(id)),\r\n  resetLocalDashboard: () => dispatch(resetDashboardState()),\r\n  setDraft: (draft) => dispatch(setDraft(draft)),\r\n  loadDashboard: (uuid, text) => dispatch(loadDashboardThunk(uuid, text)),\r\n  loadDatabaseListFromNeo4j: (driver, callback) => dispatch(loadDatabaseListFromNeo4jThunk(driver, callback)),\r\n  loadDashboardFromNeo4j: (driver, database, uuid, callback) =>\r\n    dispatch(loadDashboardFromNeo4jThunk(driver, database, uuid, callback)),\r\n  loadDashboardListFromNeo4j: (driver, database, callback) =>\r\n    dispatch(loadDashboardListFromNeo4jThunk(driver, database, callback)),\r\n  saveDashboardToNeo4j: (driver: any, database: string, dashboard: any, date: any, user: any, onSuccess) => {\r\n    dispatch(saveDashboardToNeo4jThunk(driver, database, dashboard, date, user, onSuccess));\r\n  },\r\n  deleteDashboardFromNeo4j: (driver: any, database: string, uuid: string, onSuccess) => {\r\n    dispatch(deleteDashboardFromNeo4jThunk(driver, database, uuid, onSuccess));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoDashboardSidebar);\r\n","import { Button, IconButton, SideNavigationGroupHeader } from '@neo4j-ndl/react';\r\nimport React from 'react';\r\nimport { CloudArrowUpIconOutline, EllipsisVerticalIconOutline } from '@neo4j-ndl/react/icons';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { NEODASH_VERSION } from '../DashboardReducer';\r\n\r\nexport const DashboardSidebarListItem = ({ title, selected, readonly, saved, version, onSelect, onSettingsOpen }) => {\r\n  return (\r\n    <SideNavigationGroupHeader>\r\n      <div style={{ display: 'contents', width: '100%' }}>\r\n        <Tooltip\r\n          title={version !== NEODASH_VERSION ? `Old version: v${version}` : ''}\r\n          aria-label='old version'\r\n          disableInteractive\r\n        >\r\n          <Button\r\n            aria-label={'dashboard'}\r\n            fill={selected == true ? 'outlined' : 'text'}\r\n            size='medium'\r\n            color={selected == true ? (saved == true ? 'primary' : 'warning') : 'neutral'}\r\n            style={{\r\n              width: '240px',\r\n              whiteSpace: 'nowrap',\r\n              overflowX: 'clip',\r\n              justifyContent: 'left',\r\n              marginRight: '10px',\r\n              paddingLeft: '5px',\r\n              paddingRight: '5px',\r\n            }}\r\n            onClick={() => {\r\n              onSelect();\r\n            }}\r\n          >\r\n            {saved == false ? <b>(Draft)</b> : <></>}\r\n            {title ? title : '(no title)'}\r\n          </Button>\r\n        </Tooltip>\r\n        {readonly !== true ? (\r\n          <IconButton\r\n            aria-label={'new dashboard'}\r\n            clean\r\n            size='small'\r\n            color={'neutral'}\r\n            style={{\r\n              justifyContent: 'left',\r\n              paddingLeft: '0px',\r\n              marginRight: '10px',\r\n            }}\r\n            onClick={(event) => {\r\n              saved == false ? onSettingsOpen(event) : onSettingsOpen(event);\r\n            }}\r\n          >\r\n            {saved == true ? (\r\n              <Tooltip title='Settings' aria-label='settings' disableInteractive>\r\n                <EllipsisVerticalIconOutline\r\n                  style={{ float: 'right', marginRight: '-6px' }}\r\n                  className='btn-icon-base-r'\r\n                />\r\n              </Tooltip>\r\n            ) : (\r\n              <Tooltip title='Settings' aria-label='settings' disableInteractive>\r\n                <EllipsisVerticalIconOutline\r\n                  color='rgb(var(--palette-warning-text))'\r\n                  style={{ float: 'right', marginRight: '-6px' }}\r\n                  className='btn-icon-base-r'\r\n                />\r\n              </Tooltip>\r\n            )}\r\n          </IconButton>\r\n        ) : (\r\n          <></>\r\n        )}\r\n      </div>\r\n    </SideNavigationGroupHeader>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Menu, MenuItem, MenuItems } from '@neo4j-ndl/react';\r\nimport { DocumentTextIconOutline, PlusCircleIconOutline } from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarCreateMenu = ({\r\n  anchorEl,\r\n  open,\r\n  handleNewClicked,\r\n  handleImportClicked,\r\n  handleClose,\r\n}) => {\r\n  return (\r\n    <Menu\r\n      anchorOrigin={{\r\n        horizontal: 'left',\r\n        vertical: 'bottom',\r\n      }}\r\n      transformOrigin={{\r\n        horizontal: 'left',\r\n        vertical: 'top',\r\n      }}\r\n      anchorEl={anchorEl}\r\n      open={open}\r\n      onClose={handleClose}\r\n      size='small'\r\n    >\r\n      <MenuItems>\r\n        <MenuItem onClick={handleNewClicked} title='New' />\r\n        <MenuItem onClick={handleImportClicked} title='Import' />\r\n      </MenuItems>\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarCreateMenu;\r\n","import React from 'react';\r\nimport { Menu, MenuItem, MenuItems } from '@neo4j-ndl/react';\r\nimport {\r\n  ArchiveBoxIconOutline,\r\n  ArrowUturnLeftIconOutline,\r\n  CloudArrowUpIconOutline,\r\n  DocumentDuplicateIconOutline,\r\n  DocumentTextIconOutline,\r\n  InformationCircleIconOutline,\r\n  ShareIconOutline,\r\n  FingerPrintIconOutline,\r\n  TrashIconOutline,\r\n  XMarkIconOutline,\r\n} from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarDashboardMenu = ({\r\n  anchorEl,\r\n  draft,\r\n  open,\r\n  handleInfoClicked,\r\n  handleSaveClicked,\r\n  handleDiscardClicked,\r\n  handleLoadClicked,\r\n  handleExportClicked,\r\n  handleShareClicked,\r\n  handleAccessClicked,\r\n  handleDeleteClicked,\r\n  handleClose,\r\n}) => {\r\n  return (\r\n    <Menu\r\n      anchorOrigin={{\r\n        horizontal: 'left',\r\n        vertical: 'bottom',\r\n      }}\r\n      transformOrigin={{\r\n        horizontal: 'left',\r\n        vertical: 'top',\r\n      }}\r\n      anchorEl={anchorEl}\r\n      open={open}\r\n      onClose={handleClose}\r\n      size='small'\r\n    >\r\n      {!draft ? (\r\n        <MenuItems>\r\n          <MenuItem onClick={handleInfoClicked} icon={<InformationCircleIconOutline />} title='Info' />\r\n          <MenuItem onClick={handleLoadClicked} icon={<CloudArrowUpIconOutline />} title='Load' />\r\n          {/* <MenuItem onClick={() => {}} icon={<DocumentDuplicateIconOutline />} title='Clone' /> */}\r\n          <MenuItem onClick={handleExportClicked} icon={<DocumentTextIconOutline />} title='Export' />\r\n          <MenuItem onClick={handleAccessClicked} icon={<FingerPrintIconOutline />} title='Access' />\r\n          <MenuItem onClick={handleShareClicked} icon={<ShareIconOutline />} title='Share' />\r\n          <MenuItem onClick={handleDeleteClicked} icon={<TrashIconOutline />} title='Delete' />\r\n        </MenuItems>\r\n      ) : (\r\n        <MenuItems>\r\n          <MenuItem onClick={handleSaveClicked} icon={<CloudArrowUpIconOutline />} title='Save' />\r\n          <MenuItem onClick={handleDiscardClicked} icon={<ArrowUturnLeftIconOutline />} title='Discard Draft' />\r\n        </MenuItems>\r\n      )}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarDashboardMenu;\r\n","import React from 'react';\r\nimport { Button, Dialog, Menu, MenuItem, MenuItems } from '@neo4j-ndl/react';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarDatabaseMenu = ({ anchorEl, open, handleClose, databases, selected, setSelected }) => {\r\n  return (\r\n    <Menu\r\n      anchorOrigin={{\r\n        horizontal: 'left',\r\n        vertical: 'bottom',\r\n      }}\r\n      transformOrigin={{\r\n        horizontal: 'left',\r\n        vertical: 'top',\r\n      }}\r\n      anchorEl={anchorEl}\r\n      open={open}\r\n      onClose={handleClose}\r\n      size='small'\r\n    >\r\n      <MenuItems>\r\n        {databases.map((d) => {\r\n          return (\r\n            <MenuItem\r\n              onClick={() => {\r\n                setSelected(d);\r\n              }}\r\n              title={d}\r\n              style={\r\n                d == selected\r\n                  ? {\r\n                      borderWidth: '1px',\r\n                      borderStyle: 'solid',\r\n                      color: 'rgb(var(--palette-primary-bg-strong))',\r\n                      borderColor: 'rgb(var(--palette-primary-bg-strong))',\r\n                      borderRadius: '8px',\r\n                    }\r\n                  : {}\r\n              }\r\n            />\r\n          );\r\n        })}\r\n      </MenuItems>\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarDatabaseMenu;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { IconButton, Button, Dialog, TextInput } from '@neo4j-ndl/react';\r\nimport { Menu, MenuItem, Chip } from '@mui/material';\r\nimport { Neo4jContext, Neo4jContextState } from 'use-neo4j/dist/neo4j.context';\r\nimport { PlusCircleIconOutline } from '@neo4j-ndl/react/icons';\r\nimport { QueryStatus, runCypherQuery } from '../../../report/ReportQueryRunner';\r\nimport { createNotificationThunk } from '../../../page/PageThunks';\r\nimport { useDispatch } from 'react-redux';\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n * @param open - Whether the modal is open or not.\r\n * @param database - The current Neo4j database.\r\n * @param dashboard - The current dashboard.\r\n * @param handleClose - The function to close the modal.\r\n */\r\nexport const NeoDashboardSidebarAccessModal = ({ open, database, dashboard, handleClose }) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [selectedLabels, setSelectedLabels] = useState([]);\r\n  const [allLabels, setAllLabels] = useState([]);\r\n  const [neo4jLabels, setNeo4jLabels] = useState([]);\r\n  const [newLabel, setNewLabel] = useState('');\r\n  const INITIAL_LABEL = '_Neodash_Dashboard';\r\n  const [feedback, setFeedback] = useState('');\r\n  const { driver } = useContext<Neo4jContextState>(Neo4jContext);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      return;\r\n    }\r\n    runCypherQuery(\r\n      driver,\r\n      database,\r\n      'CALL db.labels()',\r\n      {},\r\n      1000,\r\n      () => {},\r\n      (records) => setNeo4jLabels(records.map((record) => record.get('label')))\r\n    );\r\n\r\n    const query = `\r\n    MATCH (d:${INITIAL_LABEL} {uuid: \"${dashboard.uuid}\"})\r\n    RETURN labels(d) as labels\r\n    `;\r\n    runCypherQuery(\r\n      driver,\r\n      database,\r\n      query,\r\n      {},\r\n      1000,\r\n      (error) => {\r\n        console.error(error);\r\n      },\r\n      (records) => {\r\n        // Set the selectedLabels state to the labels of the dashboard\r\n        setSelectedLabels(records[0].get('labels'));\r\n        setAllLabels(records[0].get('labels'));\r\n      }\r\n    );\r\n    setFeedback('');\r\n    setNewLabel('');\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    setAllLabels([INITIAL_LABEL]);\r\n    setSelectedLabels([INITIAL_LABEL]);\r\n  }, []);\r\n\r\n  const handleOpenMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleLabelSelect = (label) => {\r\n    if (!selectedLabels.includes(label) && label !== INITIAL_LABEL) {\r\n      setSelectedLabels([...selectedLabels, label]);\r\n    }\r\n    handleCloseMenu();\r\n  };\r\n\r\n  const handleDeleteLabel = (label) => {\r\n    if (label !== INITIAL_LABEL) {\r\n      const updatedLabels = selectedLabels.filter((selectedLabel) => selectedLabel !== label);\r\n      setSelectedLabels(updatedLabels);\r\n    }\r\n  };\r\n\r\n  const handleAddNewLabel = (e) => {\r\n    if (e.key === 'Enter' && newLabel.trim() !== '') {\r\n      if (selectedLabels.includes(newLabel)) {\r\n        setFeedback('Label already exists. Please enter a unique label.');\r\n        handleCloseMenu();\r\n      } else {\r\n        setSelectedLabels([...selectedLabels, newLabel]);\r\n        handleLabelSelect(newLabel);\r\n        setNewLabel('');\r\n        handleCloseMenu();\r\n        setFeedback('');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Finding the difference between what is stored and what has been selected in the UI\r\n    let toDelete = allLabels.filter((item) => selectedLabels.indexOf(item) < 0);\r\n\r\n    const query = `\r\n    MATCH (d:${INITIAL_LABEL} {uuid: \"${dashboard.uuid}\"})\r\n    SET d:${selectedLabels.join(':')}\r\n    ${toDelete.length > 0 ? `REMOVE d:${toDelete.join(':')}` : ''}\r\n    RETURN 1;\r\n    `;\r\n\r\n    runCypherQuery(\r\n      driver,\r\n      database,\r\n      query,\r\n      { selectedLabels: selectedLabels },\r\n      1000,\r\n      (status) => {\r\n        if (status == QueryStatus.COMPLETE) {\r\n          dispatch(\r\n            createNotificationThunk(\r\n              '🎉 Success!',\r\n              'Selected Labels have successfully been added to the dashboard node.'\r\n            )\r\n          );\r\n          handleClose();\r\n        } else {\r\n          dispatch(\r\n            createNotificationThunk(\r\n              'Unable to save dashboard',\r\n              `Do you have write access to the '${database}' database?`\r\n            )\r\n          );\r\n        }\r\n      },\r\n      () => {}\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog size='small' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Dasboard Access Control - '{dashboard?.title}'</Dialog.Header>\r\n      <Dialog.Content>\r\n        Welcome to the Dashboard Access settings!\r\n        <br />\r\n        In this modal, you can select the labels that you want to add to the current dashboard node.\r\n        <br />\r\n        For more information, please refer to the{' '}\r\n        <a\r\n          href='https://neo4j.com/labs/neodash/2.4/user-guide/access-control-management/'\r\n          target='_blank'\r\n          rel='noopener noreferrer'\r\n          style={{ color: 'blue', textDecoration: 'underline' }}\r\n        >\r\n          documentation\r\n        </a>\r\n        .\r\n      </Dialog.Content>\r\n      <div>\r\n        <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleCloseMenu}>\r\n          {/* Fetch labels dynamically from Neo4j and map to menu items */}\r\n          {neo4jLabels\r\n            .filter((e) => !selectedLabels.includes(e))\r\n            .map((label) => (\r\n              <MenuItem key={label} onClick={() => handleLabelSelect(label)}>\r\n                {label}\r\n              </MenuItem>\r\n            ))}\r\n          <MenuItem>\r\n            <TextInput\r\n              value={newLabel}\r\n              onChange={(e) => setNewLabel(e.target.value)}\r\n              onKeyDown={(e: KeyboardEvent) => {\r\n                handleAddNewLabel(e);\r\n                e.stopPropagation();\r\n              }}\r\n              errorText={feedback}\r\n              placeholder='Create New label'\r\n              autoComplete='off'\r\n            />\r\n          </MenuItem>\r\n        </Menu>\r\n        <div style={{ display: 'flex', flexWrap: 'wrap', alignItems: 'center', marginTop: '10px' }}>\r\n          {selectedLabels.map((label) => (\r\n            <Chip\r\n              key={label}\r\n              label={label}\r\n              variant='outlined'\r\n              onDelete={label === INITIAL_LABEL ? undefined : () => handleDeleteLabel(label)}\r\n              style={{ marginRight: '5px', marginBottom: '5px' }}\r\n            />\r\n          ))}\r\n          <IconButton title='Add Label' size='large' clean style={{ marginBottom: '5px' }} onClick={handleOpenMenu}>\r\n            <PlusCircleIconOutline color='#018BFF' />\r\n          </IconButton>\r\n        </div>\r\n      </div>\r\n      <Dialog.Actions>\r\n        <Button onClick={handleClose} style={{ float: 'right' }} fill='outlined' floating>\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={handleSave} color='primary' style={{ float: 'right', marginRight: '10px' }} floating>\r\n          Save\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarAccessModal;\r\n","import React from 'react';\r\nimport { Button, Dialog } from '@neo4j-ndl/react';\r\nimport { BackspaceIconOutline, ExclamationTriangleIconOutline } from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarCreateModal = ({ open, onConfirm, handleClose }) => {\r\n  return (\r\n    <Dialog size='small' open={open == true} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Discard Draft?</Dialog.Header>\r\n      <Dialog.Subtitle>\r\n        Creating a new dashboard will delete your current draft. Save the draft first to ensure your dashboard is\r\n        stored.\r\n      </Dialog.Subtitle>\r\n      <Dialog.Actions>\r\n        <Button\r\n          onClick={() => {\r\n            handleClose();\r\n          }}\r\n          style={{ float: 'right' }}\r\n        >\r\n          <BackspaceIconOutline className='btn-icon-base-l' />\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            onConfirm();\r\n            handleClose();\r\n          }}\r\n          color='danger'\r\n          fill='outlined'\r\n          style={{ float: 'right', marginRight: '5px' }}\r\n        >\r\n          Continue\r\n          <ExclamationTriangleIconOutline className='btn-icon-base-r' />\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarCreateModal;\r\n","import React from 'react';\r\nimport { Button, Dialog } from '@neo4j-ndl/react';\r\nimport { BackspaceIconOutline, TrashIconSolid } from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarDeleteModal = ({ open, title, onConfirm, handleClose }) => {\r\n  return (\r\n    <Dialog size='small' open={open == true} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Delete Dashboard '{title}'?</Dialog.Header>\r\n      <Dialog.Subtitle>\r\n        Are you sure you want to delete this dashboard? <br /> This action cannot be undone.\r\n      </Dialog.Subtitle>\r\n      <Dialog.Actions>\r\n        <Button\r\n          fill='outlined'\r\n          onClick={() => {\r\n            handleClose();\r\n          }}\r\n          style={{ float: 'right' }}\r\n        >\r\n          <BackspaceIconOutline className='btn-icon-base-l' />\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            onConfirm();\r\n            handleClose();\r\n          }}\r\n          color='danger'\r\n          fill='filled'\r\n          style={{ float: 'right', marginRight: '5px' }}\r\n        >\r\n          Delete\r\n          <TrashIconSolid className='btn-icon-base-r' />\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarDeleteModal;\r\n","import React from 'react';\r\nimport { DocumentArrowDownIconOutline } from '@neo4j-ndl/react/icons';\r\nimport { Button, Dialog } from '@neo4j-ndl/react';\r\nimport { valueIsArray, valueIsObject } from '../../../chart/ChartUtils';\r\nimport { TextareaAutosize } from '@mui/material';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarExportModal = ({ open, dashboard, handleClose }) => {\r\n  /**\r\n   * Removes the specified set of keys from the nested dictionary.\r\n   */\r\n  const filterNestedDict = (value: any, removedKeys: any[]) => {\r\n    if (value == undefined) {\r\n      return value;\r\n    }\r\n\r\n    if (valueIsArray(value)) {\r\n      return value.map((v) => filterNestedDict(v, removedKeys));\r\n    }\r\n\r\n    if (valueIsObject(value)) {\r\n      const newValue = {};\r\n      Object.keys(value).forEach((k) => {\r\n        if (removedKeys.indexOf(k) != -1) {\r\n          newValue[k] = undefined;\r\n        } else {\r\n          newValue[k] = filterNestedDict(value[k], removedKeys);\r\n        }\r\n      });\r\n      return newValue;\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const filteredDashboard = filterNestedDict(dashboard, [\r\n    'fields',\r\n    'settingsOpen',\r\n    'advancedSettingsOpen',\r\n    'collapseTimeout',\r\n    'apiKey', // Added for query-translator extension\r\n  ]);\r\n\r\n  const dashboardString = JSON.stringify(filteredDashboard, null, 2);\r\n  const downloadDashboard = () => {\r\n    const element = document.createElement('a');\r\n    const file = new Blob([dashboardString], { type: 'text/plain' });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = 'dashboard.json';\r\n    document.body.appendChild(element); // Required for this to work in FireFox\r\n    element.click();\r\n  };\r\n\r\n  return (\r\n    <Dialog size='large' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Export Dashboard</Dialog.Header>\r\n      <Dialog.Content>\r\n        Export your dashboard as a JSON file, or copy-paste the file from here.\r\n        <br />\r\n        <Button onClick={downloadDashboard} fill='outlined' color='neutral' floating>\r\n          Save to file\r\n          <DocumentArrowDownIconOutline className='btn-icon-base-r' aria-label={'save arrow'} />\r\n        </Button>\r\n        <br />\r\n        <br />\r\n        <TextareaAutosize\r\n          style={{ minHeight: '500px', width: '100%', border: '1px solid lightgray' }}\r\n          className={'textinput-linenumbers'}\r\n          value={dashboardString}\r\n          aria-label=''\r\n          placeholder='Your dashboard JSON should be displayed here.'\r\n        />\r\n      </Dialog.Content>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarExportModal;\r\n","import React, { useRef } from 'react';\r\nimport { PlayIconSolid, DocumentPlusIconOutline } from '@neo4j-ndl/react/icons';\r\nimport { Button, Checkbox, Dialog, Dropdown } from '@neo4j-ndl/react';\r\nimport TextareaAutosize from '@mui/material/TextareaAutosize';\r\n\r\nexport const NeoDashboardSidebarImportModal = ({ open, onImport, handleClose }) => {\r\n  const [text, setText] = React.useState('');\r\n  const loadFromFile = useRef(null);\r\n\r\n  const onSelectFileClick = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.files == null) {\r\n      return;\r\n    }\r\n\r\n    const file = e.target.files[0];\r\n    const text = await file.text();\r\n\r\n    setText(text);\r\n  };\r\n\r\n  return (\r\n    <Dialog size='large' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Import Dashboard</Dialog.Header>\r\n      <Dialog.Content>\r\n        Import your dashboard from a JSON file, or copy-paste the save file here.\r\n        <br />\r\n        <b>Importing will discard your current draft, if any.</b>\r\n        <br /> <br />\r\n      </Dialog.Content>\r\n      <TextareaAutosize\r\n        style={{ minHeight: '200px', width: '100%', border: '1px solid lightgray' }}\r\n        className={'textinput-linenumbers'}\r\n        onChange={(e) => setText(e.target.value)}\r\n        value={text}\r\n        aria-label=''\r\n        placeholder='Paste a dashboard JSON file here...'\r\n      />\r\n      <Dialog.Actions>\r\n        <Button\r\n          onClick={() => {\r\n            loadFromFile.current.click();\r\n          }}\r\n          fill='outlined'\r\n          color='neutral'\r\n          style={{ marginLeft: '10px' }}\r\n          floating\r\n        >\r\n          <input value='' type='file' ref={loadFromFile} onChange={onSelectFileClick} hidden />\r\n          Select From File\r\n          <DocumentPlusIconOutline className='btn-icon-base-r' />\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            onImport(text);\r\n            setText('');\r\n            handleClose();\r\n          }}\r\n          color={text.length > 0 ? 'success' : 'neutral'}\r\n          disabled={text.length == 0}\r\n          style={{ float: 'right', marginRight: '10px' }}\r\n          floating\r\n        >\r\n          Import\r\n          <PlayIconSolid className='btn-icon-base-r' />\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarImportModal;\r\n","import React from 'react';\r\nimport { Dialog } from '@neo4j-ndl/react';\r\nimport { DataGrid } from '@mui/x-data-grid';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarInfoModal = ({ open, dashboard, handleClose }) => {\r\n  const columns = [\r\n    { field: 'field', headerName: 'Field', width: 150 },\r\n    { field: 'value', headerName: 'Value', width: 600 },\r\n  ];\r\n\r\n  const rows = dashboard\r\n    ? [\r\n        { id: 0, field: 'ID', value: dashboard.uuid },\r\n        { id: 1, field: 'Title', value: dashboard.title },\r\n        { id: 2, field: 'Last Modified', value: dashboard.date },\r\n        { id: 3, field: 'Author', value: dashboard.author },\r\n        { id: 4, field: 'Version', value: dashboard.version },\r\n      ]\r\n    : [];\r\n\r\n  return (\r\n    <Dialog size='large' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>About '{dashboard && dashboard.title}'</Dialog.Header>\r\n      <Dialog.Content>\r\n        <div style={{ height: '300px' }}>\r\n          <DataGrid\r\n            rows={rows}\r\n            columns={columns}\r\n            pageSize={5}\r\n            rowsPerPageOptions={[5]}\r\n            disableSelectionOnClick\r\n            headerHeight={0}\r\n            hideFooter={true}\r\n            components={{\r\n              ColumnSortedDescendingIcon: () => <></>,\r\n              ColumnSortedAscendingIcon: () => <></>,\r\n            }}\r\n          />\r\n        </div>\r\n      </Dialog.Content>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarInfoModal;\r\n","import React from 'react';\r\nimport { Button, Dialog } from '@neo4j-ndl/react';\r\nimport { BackspaceIconOutline, ExclamationTriangleIconOutline, TrashIconOutline } from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarLoadModal = ({ open, onConfirm, handleClose }) => {\r\n  return (\r\n    <Dialog size='small' open={open == true} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Discard Draft?</Dialog.Header>\r\n      <Dialog.Subtitle>\r\n        You are discarding your current draft dashboard.\r\n        <br />\r\n        <b>Your draft will not be recoverable.</b>\r\n      </Dialog.Subtitle>\r\n      <Dialog.Actions>\r\n        <Button\r\n          onClick={() => {\r\n            handleClose();\r\n          }}\r\n          fill='outlined'\r\n          style={{ float: 'right' }}\r\n        >\r\n          <BackspaceIconOutline className='btn-icon-base-l' />\r\n          Keep\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            onConfirm();\r\n            handleClose();\r\n          }}\r\n          color='danger'\r\n          style={{ float: 'right', marginRight: '5px' }}\r\n        >\r\n          Discard\r\n          <TrashIconOutline className='btn-icon-base-r' />\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarLoadModal;\r\n","import React from 'react';\r\nimport { DatabaseAddCircleIcon, BackspaceIconOutline } from '@neo4j-ndl/react/icons';\r\nimport { Button, Dialog } from '@neo4j-ndl/react';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarSaveModal = ({ open, onConfirm, handleClose, overwrite }) => {\r\n  return (\r\n    <Dialog size='small' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Save to Neo4j</Dialog.Header>\r\n      <Dialog.Content>\r\n        This will <b>{overwrite ? 'overwrite' : 'save'}</b> your current draft as a node in your Neo4j database.\r\n        <br />\r\n        Ensure you have write permissions to the database to use this feature.\r\n      </Dialog.Content>\r\n      <Dialog.Actions>\r\n        <Button onClick={handleClose} style={{ float: 'right' }} fill='outlined' floating>\r\n          <BackspaceIconOutline className='btn-icon-base-l' aria-label={'save back'} />\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            onConfirm();\r\n            handleClose();\r\n          }}\r\n          color='success'\r\n          style={{ float: 'right', marginRight: '10px' }}\r\n          floating\r\n        >\r\n          Save\r\n          <DatabaseAddCircleIcon className='btn-icon-base-r' />\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarSaveModal;\r\n","import React from 'react';\r\nimport { Checkbox, Dialog, TextLink } from '@neo4j-ndl/react';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDashboardSidebarShareModal = ({\r\n  uuid,\r\n  dashboardDatabase,\r\n  connection,\r\n  open,\r\n  onLegacyShareClicked,\r\n  handleClose,\r\n}) => {\r\n  const shareBaseURL = 'http://neodash.graphapp.io';\r\n  const shareBaseURLAlternative = 'https://neodash.graphapp.io';\r\n  const shareLocalURL = window.location.origin.startsWith('file') ? shareBaseURL : window.location.origin;\r\n  const [selfHosted, setSelfHosted] = React.useState(false);\r\n  const [standalone, setStandalone] = React.useState(false);\r\n  const [includeCredentials, setIncludeCredentials] = React.useState(false);\r\n\r\n  function getShareURL() {\r\n    const prefix = selfHosted ? shareLocalURL : shareBaseURL;\r\n    const id = encodeURIComponent(uuid);\r\n    const db = encodeURIComponent(dashboardDatabase);\r\n    const suffix1 = includeCredentials\r\n      ? `&credentials=${encodeURIComponent(\r\n          `${connection.protocol}://${connection.username}:${connection.password}@${connection.database}:${connection.url}:${connection.port}`\r\n        )}`\r\n      : '';\r\n    const suffix2 = standalone ? `&standalone=Yes` : '';\r\n    return `${prefix}/?share&type=database&id=${id}&dashboardDatabase=${db}${suffix1}${suffix2}`;\r\n  }\r\n\r\n  return (\r\n    <Dialog size='small' open={open == true} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Share Dashboard</Dialog.Header>\r\n      <Dialog.Subtitle>\r\n        This screen lets you create a one-off, direct link for your dashboard. Click{' '}\r\n        <TextLink onClick={onLegacyShareClicked}>here</TextLink> to use legacy file-sharing instead.\r\n      </Dialog.Subtitle>\r\n      <Dialog.Content>\r\n        {shareLocalURL !== shareBaseURL && shareLocalURL !== shareBaseURLAlternative ? (\r\n          <Checkbox\r\n            label='Self-hosted'\r\n            style={{ fontSize: 'small' }}\r\n            checked={selfHosted}\r\n            name='enable'\r\n            onClick={() => {\r\n              setSelfHosted(!selfHosted);\r\n            }}\r\n          />\r\n        ) : (\r\n          <></>\r\n        )}\r\n        <Checkbox\r\n          label='Hide Editor UI'\r\n          style={{ fontSize: 'small' }}\r\n          checked={standalone}\r\n          name='enable'\r\n          onClick={() => {\r\n            setStandalone(!standalone);\r\n          }}\r\n        />\r\n\r\n        <Checkbox\r\n          label={'Include credentials ⚠️'}\r\n          style={{ fontSize: 'small' }}\r\n          checked={includeCredentials}\r\n          name='enable'\r\n          onClick={() => {\r\n            setIncludeCredentials(!includeCredentials);\r\n          }}\r\n        />\r\n\r\n        <br />\r\n        <span>Your Temporary Link:</span>\r\n        <br />\r\n        <span style={{ display: 'block', width: '100%', overflow: 'hidden' }}>\r\n          <TextLink href={getShareURL()} externalLink>\r\n            {' '}\r\n            {getShareURL()}{' '}\r\n          </TextLink>\r\n          <br />\r\n          {includeCredentials ? <i>Caution: this link embeds your current database credentials.</i> : <></>}\r\n        </span>\r\n      </Dialog.Content>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDashboardSidebarShareModal;\r\n","import React, { useContext } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { DataGrid } from '@mui/x-data-grid';\r\nimport { Neo4jContext, Neo4jContextState } from 'use-neo4j/dist/neo4j.context';\r\nimport NeoSetting from '../../../../component/field/Setting';\r\nimport { applicationGetConnection } from '../../../../application/ApplicationSelectors';\r\nimport { SELECTION_TYPES } from '../../../../config/CardConfig';\r\nimport { MenuItem, Button, Dialog, Dropdown, TextLink } from '@neo4j-ndl/react';\r\nimport {\r\n  ShareIconOutline,\r\n  PlayIconSolid,\r\n  DocumentCheckIconOutline,\r\n  DatabaseAddCircleIcon,\r\n} from '@neo4j-ndl/react/icons';\r\n\r\nconst shareBaseURL = 'http://neodash.graphapp.io';\r\nconst shareLocalURL = window.location.origin.startsWith('file') ? shareBaseURL : window.location.origin;\r\n\r\nexport const NeoShareModal = ({ open, handleClose, connection }) => {\r\n  const [loadFromNeo4jModalOpen, setLoadFromNeo4jModalOpen] = React.useState(false);\r\n  const [loadFromFileModalOpen, setLoadFromFileModalOpen] = React.useState(false);\r\n  const [rows, setRows] = React.useState([]);\r\n  const { driver } = useContext<Neo4jContextState>(Neo4jContext);\r\n\r\n  // One of [null, database, file]\r\n  const shareType = 'url';\r\n  const [shareID, setShareID] = React.useState(null);\r\n  const [shareName, setShareName] = React.useState(null);\r\n  const [shareConnectionDetails, setShareConnectionDetails] = React.useState('No');\r\n  const [shareStandalone, setShareStandalone] = React.useState('No');\r\n  const [selfHosted, setSelfHosted] = React.useState('No');\r\n  const [shareLink, setShareLink] = React.useState(null);\r\n\r\n  const [dashboardDatabase, setDashboardDatabase] = React.useState('neo4j');\r\n\r\n  const columns = [\r\n    { field: 'uuid', hide: true, headerName: 'ID', width: 150 },\r\n    { field: 'date', headerName: 'Date', width: 200 },\r\n    { field: 'title', headerName: 'Title', width: 370 },\r\n    { field: 'author', headerName: 'Author', width: 160 },\r\n    {\r\n      field: 'load',\r\n      headerName: ' ',\r\n      renderCell: (c) => {\r\n        return (\r\n          <Button\r\n            onClick={() => {\r\n              setShareID(c.uuid);\r\n              setShareName(c.row.title);\r\n              setShareType('database');\r\n              setLoadFromNeo4jModalOpen(false);\r\n            }}\r\n            style={{ float: 'right' }}\r\n            fill='outlined'\r\n            color='neutral'\r\n            floating\r\n          >\r\n            Select\r\n            <PlayIconSolid className='btn-icon-base-r' />\r\n          </Button>\r\n        );\r\n      },\r\n      width: 130,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Dialog key={1} size='large' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>\r\n        <ShareIconOutline className='icon-base icon-inline text-r' />\r\n        Share Dashboard File\r\n      </Dialog.Header>\r\n      <Dialog.Content>\r\n        This window lets you create a temporary share link for your dashboard. Keep in mind that share links are not\r\n        intended as a way to publish your dashboard for users, see the&nbsp;\r\n        <TextLink externalLink href='https://neo4j.com/labs/neodash/2.4/user-guide/publishing/'>\r\n          documentation\r\n        </TextLink>{' '}\r\n        for more on publishing.\r\n        <br />\r\n        <hr />\r\n        <br />\r\n        To share a dashboard file directly, make it accessible{' '}\r\n        <TextLink externalLink target='_blank' href='https://gist.github.com/'>\r\n          online\r\n        </TextLink>\r\n        .<br /> Then, paste the direct link here:\r\n        <NeoSetting\r\n          key={'url'}\r\n          name={'url'}\r\n          value={shareID}\r\n          style={{ marginLeft: '0px', width: '100%', marginBottom: '10px' }}\r\n          type={SELECTION_TYPES.TEXT}\r\n          helperText={'Make sure the URL starts with http:// or https://.'}\r\n          label={''}\r\n          defaultValue='https://gist.githubusercontent.com/username/0a78d80567f23072f06e03005cf53bce/raw/f97cc...'\r\n          onChange={(e) => {\r\n            setShareLink(null);\r\n            setShareID(e);\r\n          }}\r\n        />\r\n        {shareID ? (\r\n          <>\r\n            <br />\r\n            <NeoSetting\r\n              key={'credentials'}\r\n              name={'credentials'}\r\n              value={shareConnectionDetails}\r\n              type={SELECTION_TYPES.LIST}\r\n              style={{ marginLeft: '0px', width: '100%', marginBottom: '10px' }}\r\n              helperText={'Share the dashboard including your Neo4j credentials.'}\r\n              label={'Include Connection Details'}\r\n              defaultValue={'No'}\r\n              choices={['Yes', 'No']}\r\n              onChange={(e) => {\r\n                if (e == 'No' && shareStandalone == 'Yes') {\r\n                  return;\r\n                }\r\n                setShareLink(null);\r\n                setShareConnectionDetails(e);\r\n              }}\r\n            />\r\n            {shareLocalURL != shareBaseURL ? (\r\n              <NeoSetting\r\n                key={'standalone'}\r\n                name={'standalone'}\r\n                value={shareStandalone}\r\n                style={{ marginLeft: '0px', width: '100%', marginBottom: '10px' }}\r\n                type={SELECTION_TYPES.LIST}\r\n                helperText={'Share the dashboard as a standalone webpage, without the NeoDash editor.'}\r\n                label={'Standalone Dashboard'}\r\n                defaultValue={'No'}\r\n                choices={['Yes', 'No']}\r\n                onChange={(e) => {\r\n                  setShareLink(null);\r\n                  setShareStandalone(e);\r\n                  if (e == 'Yes') {\r\n                    setShareConnectionDetails('Yes');\r\n                  }\r\n                }}\r\n              />\r\n            ) : (\r\n              <></>\r\n            )}\r\n            <NeoSetting\r\n              key={'selfHosted'}\r\n              name={'selfHosted'}\r\n              value={selfHosted}\r\n              style={{ marginLeft: '0px', width: '100%', marginBottom: '10px' }}\r\n              type={SELECTION_TYPES.LIST}\r\n              helperText={'Share the dashboard using self Hosted Neodash, otherwise neodash.graphapp.io will be used'}\r\n              label={'Self Hosted Dashboard'}\r\n              defaultValue={'No'}\r\n              choices={['Yes', 'No']}\r\n              onChange={(e) => {\r\n                setShareLink(null);\r\n                setSelfHosted(e);\r\n              }}\r\n            />\r\n            <Button\r\n              onClick={() => {\r\n                setShareLink(\r\n                  `${\r\n                    selfHosted == 'Yes' ? shareLocalURL : shareBaseURL\r\n                  }/?share&type=${shareType}&id=${encodeURIComponent(shareID)}&dashboardDatabase=${encodeURIComponent(\r\n                    dashboardDatabase\r\n                  )}${\r\n                    shareConnectionDetails == 'Yes'\r\n                      ? `&credentials=${encodeURIComponent(\r\n                          `${connection.protocol}://${connection.username}:${connection.password}@${connection.database}:${connection.url}:${connection.port}`\r\n                        )}`\r\n                      : ''\r\n                  }${shareStandalone == 'Yes' ? `&standalone=${shareStandalone}` : ''}`\r\n                );\r\n              }}\r\n              fill='outlined'\r\n              color='neutral'\r\n              floating\r\n            >\r\n              Generate Link\r\n              <ShareIconOutline className='btn-icon-base-r' />\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          <></>\r\n        )}\r\n        {shareLink ? (\r\n          <>\r\n            <br />\r\n            Use the generated link to view the dashboard:\r\n            <br />\r\n            <TextLink externalLink href={shareLink} target='_blank'>\r\n              {shareLink}\r\n            </TextLink>\r\n            <br />\r\n          </>\r\n        ) : (\r\n          <></>\r\n        )}\r\n      </Dialog.Content>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  connection: applicationGetConnection(state),\r\n});\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoShareModal);\r\n","import React from 'react';\r\nimport { EXTENSIONS } from './ExtensionConfig';\r\nimport { connect } from 'react-redux';\r\nimport { createNotificationThunk } from '../page/PageThunks';\r\nimport { getDashboardExtensions } from '../dashboard/DashboardSelectors';\r\nimport { setExtensionEnabled } from '../dashboard/DashboardActions';\r\nimport { setExtensionReducerEnabled } from './state/ExtensionActions';\r\nimport { Dialog, Label, MenuItem, TextLink, Typography, Checkbox, IconButton } from '@neo4j-ndl/react';\r\nimport { PuzzlePieceIconSolid } from '@neo4j-ndl/react/icons';\r\nimport { Section, SectionContent } from '../modal/ModalUtils';\r\nimport Tooltip from '@mui/material/Tooltip/Tooltip';\r\n\r\nconst NeoExtensionsModal = ({\r\n  extensions,\r\n  setExtensionEnabled,\r\n  onExtensionUnavailableTriggered, // Action to take when the user tries to enable a disabled extension.\r\n  setExtensionReducerEnabled,\r\n  closeMenu,\r\n}) => {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    closeMenu();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title='Extensions' aria-label='extensions' disableInteractive>\r\n        <IconButton className='n-mx-1' aria-label='Extensions' onClick={handleClickOpen}>\r\n          <PuzzlePieceIconSolid />\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      {open ? (\r\n        <Dialog size='large' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n          <Dialog.Header id='form-dialog-title'>\r\n            <PuzzlePieceIconSolid className='icon-base icon-inline text-r' />\r\n            Extensions\r\n          </Dialog.Header>\r\n          <Dialog.Content>\r\n            <div className='n-flex n-flex-col n-gap-token-4 n-divide-y n-divide-neutral-border-strong'>\r\n              <Section>\r\n                <SectionContent>\r\n                  <TextLink\r\n                    externalLink\r\n                    target='_blank'\r\n                    href='https://neo4j.com/labs/neodash/2.4/user-guide/extensions/'\r\n                  >\r\n                    Extensions\r\n                  </TextLink>\r\n                  &nbsp;are a way of extending the core functionality of NeoDash with custom logic. This can be a new\r\n                  visualization, extra styling options for an existing visualization, or even a completely new logic for\r\n                  the dashboarding engine.\r\n                </SectionContent>\r\n              </Section>\r\n\r\n              {Object.values(EXTENSIONS).map((e, key) => {\r\n                return (\r\n                  <Section key={key}>\r\n                    <SectionContent>\r\n                      <div style={{ opacity: e.enabled ? 1.0 : 0.6 }}>\r\n                        <table>\r\n                          <tbody>\r\n                            <tr>\r\n                              <td>\r\n                                <div className='n-flex n-flex-row n-gap-token-4 n-items-center'>\r\n                                  <Typography variant='h5'>{e.label}</Typography>\r\n                                  {e.enabled && e.author == 'Neo4j Professional Services' && (\r\n                                    <Label color='info' fill='outlined'>\r\n                                      Expert\r\n                                    </Label>\r\n                                  )}\r\n                                </div>\r\n                              </td>\r\n                              <td style={{ width: 50 }}></td>\r\n                              <td style={{ float: 'right' }}>\r\n                                <Tooltip title='Enable the extension' aria-label='' disableInteractive>\r\n                                  <Checkbox\r\n                                    id={`checkbox-${e.name}`}\r\n                                    label='Active'\r\n                                    disabled={!e.enabled}\r\n                                    style={{ fontSize: 'small' }}\r\n                                    checked={extensions[e.name]}\r\n                                    name='enable'\r\n                                    onClick={() => {\r\n                                      let active = extensions[e.name] == undefined ? true : undefined;\r\n                                      if (e.enabled) {\r\n                                        setExtensionEnabled(e.name, active);\r\n\r\n                                        // Subscribing the reducer binded to the newly enabled extension\r\n                                        // to the extensionReducer\r\n                                        if (e.reducerPrefix) {\r\n                                          setExtensionReducerEnabled(e.reducerPrefix, active);\r\n                                        }\r\n                                      } else {\r\n                                        onExtensionUnavailableTriggered(e.label);\r\n                                        // If an extension presents a reducer, we need to unbind it from the extension reducer\r\n                                        if (e.reducerPrefix) {\r\n                                          setExtensionReducerEnabled(e.reducerPrefix, active);\r\n                                        }\r\n                                      }\r\n                                    }}\r\n                                  />\r\n                                </Tooltip>\r\n                              </td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td valign='top'>\r\n                                <br />\r\n                                <p>{e.description}</p>\r\n                                <br />\r\n                                <p>\r\n                                  Author:{' '}\r\n                                  <TextLink externalLink href={e.link}>\r\n                                    {e.author}\r\n                                  </TextLink>\r\n                                </p>\r\n                              </td>\r\n                              <td></td>\r\n                              <td style={{ width: 300 }}>\r\n                                <br />\r\n                                <img src={e.image} style={{ border: '1px solid grey', width: '100%' }}></img>\r\n                              </td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </SectionContent>\r\n                  </Section>\r\n                );\r\n              })}\r\n            </div>\r\n          </Dialog.Content>\r\n        </Dialog>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  extensions: getDashboardExtensions(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setExtensionEnabled: (name, enabled) => dispatch(setExtensionEnabled(name, enabled)),\r\n  setExtensionReducerEnabled: (name, enabled) => dispatch(setExtensionReducerEnabled(name, enabled)),\r\n  onExtensionUnavailableTriggered: (name) =>\r\n    dispatch(\r\n      createNotificationThunk(\r\n        `Extension '${name}' Unavailable`,\r\n        // eslint-disable-next-line no-multi-str\r\n        'This extension is not available in this version of NeoDash.\\n  \\\r\n     To learn more about expert extensions, check out the project documentation.'\r\n      )\r\n    ),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoExtensionsModal);\r\n","import React from 'react';\r\nimport { Button, Dialog } from '@neo4j-ndl/react';\r\nimport { BackspaceIconOutline, TrashIconSolid } from '@neo4j-ndl/react/icons';\r\n\r\n/**\r\n * Configures setting the current Neo4j database connection for the dashboard.\r\n */\r\nexport const NeoDeletePageModal = ({ modalOpen, onRemove, handleClose }) => {\r\n  return (\r\n    <Dialog size='small' open={modalOpen == true} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n      <Dialog.Header id='form-dialog-title'>Delete page?</Dialog.Header>\r\n      <Dialog.Subtitle>Are you sure you want to remove this page? This cannot be undone.</Dialog.Subtitle>\r\n      <Dialog.Actions>\r\n        <Button\r\n          onClick={() => {\r\n            handleClose();\r\n          }}\r\n          fill='outlined'\r\n          style={{ float: 'right' }}\r\n        >\r\n          <BackspaceIconOutline className='btn-icon-base-l' />\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            onRemove();\r\n            handleClose();\r\n          }}\r\n          color='danger'\r\n          style={{ float: 'right', marginRight: '5px' }}\r\n        >\r\n          Remove\r\n          <TrashIconSolid className='btn-icon-base-r' />\r\n        </Button>\r\n      </Dialog.Actions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NeoDeletePageModal;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IconButton, MenuItem } from '@neo4j-ndl/react';\r\nimport NeoDashboardSidebarExportModal from '../dashboard/sidebar/modal/DashboardSidebarExportModal';\r\nimport { getDashboardJson } from './ModalSelectors';\r\nimport { DocumentArrowDownIconOutline, DocumentTextIconOutline } from '@neo4j-ndl/react/icons';\r\nimport Tooltip from '@mui/material/Tooltip/Tooltip';\r\n/**\r\n * A modal to save a dashboard as a JSON text string.\r\n * The button to open the modal is intended to use in a drawer at the side of the page.\r\n */\r\nexport const NeoExportModal = ({ dashboard }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  return (\r\n    <>\r\n      <Tooltip title='Export' aria-label='export' disableInteractive>\r\n        <IconButton className='n-mx-1' onClick={() => setOpen(true)} aria-label='Export'>\r\n          <DocumentArrowDownIconOutline />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <NeoDashboardSidebarExportModal\r\n        open={open}\r\n        dashboard={dashboard}\r\n        handleClose={() => {\r\n          setOpen(false);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  dashboard: getDashboardJson(state),\r\n});\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoExportModal);\r\n","export const getDashboardJson = (state: any) => state.dashboard;\r\n","import React from 'react';\r\nimport NeoCodeEditorComponent from '../component/editor/CodeEditorComponent';\r\nimport NeoReport from '../report/Report';\r\nimport { Dialog, MenuItem } from '@neo4j-ndl/react';\r\nimport { ChartBarIconSolid } from '@neo4j-ndl/react/icons';\r\nimport { Section, SectionTitle, SectionContent } from '../modal/ModalUtils';\r\nimport { enterHandler } from '../utils/accessibility';\r\n\r\nexport const NeoReportExamplesModal = ({ database, examples, extensions }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MenuItem\r\n        title='Examples'\r\n        onClick={handleClickOpen}\r\n        onKeyDown={(e) => enterHandler(e, handleClickOpen)}\r\n        icon={<ChartBarIconSolid />}\r\n      />\r\n\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby='form-dialog-title' className='dialog-xl'>\r\n        <Dialog.Header id='form-dialog-title'>\r\n          <ChartBarIconSolid className='icon-base icon-inline text-r' />\r\n          Report Examples\r\n        </Dialog.Header>\r\n        <Dialog.Content>\r\n          <div className='n-flex n-flex-col n-gap-token-4 n-divide-y n-divide-neutral-border-strong'>\r\n            {examples.map((example, index) => {\r\n              return (\r\n                <Section key={`example-${index}`}>\r\n                  <SectionTitle>{example.title}</SectionTitle>\r\n                  <SectionContent>\r\n                    <div className='n-grid n-grid-cols-3 n-gap-8'>\r\n                      <div className='n-col-span-3'>{example.description}</div>\r\n                      <div className='n-col-span-1'>\r\n                        <NeoCodeEditorComponent\r\n                          editable={false}\r\n                          placeholder=''\r\n                          value={example.exampleQuery}\r\n                          language={example.type == 'iframe' ? 'url' : 'cypher'}\r\n                        ></NeoCodeEditorComponent>\r\n                      </div>\r\n\r\n                      <div\r\n                        className='n-col-span-2'\r\n                        style={{\r\n                          height: '355px',\r\n                          overflow: 'hidden',\r\n                          border: '1px solid lightgrey',\r\n                        }}\r\n                      >\r\n                        <NeoReport\r\n                          id={index}\r\n                          query={example.syntheticQuery}\r\n                          database={database}\r\n                          disabled={!open}\r\n                          extensions={extensions}\r\n                          selection={example.selection}\r\n                          parameters={example.globalParameters}\r\n                          settings={example.settings}\r\n                          fields={example.fields}\r\n                          dimensions={example.dimensions}\r\n                          ChartType={example.chartType}\r\n                          type={example.type}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </SectionContent>\r\n                </Section>\r\n              );\r\n            })}\r\n          </div>\r\n        </Dialog.Content>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NeoReportExamplesModal;\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport NeoAddCard from '../card/CardAddButton';\r\nimport NeoCard from '../card/Card';\r\nimport { getReports } from './PageSelectors';\r\nimport { addReportThunk, removeReportThunk, updatePageLayoutThunk, cloneReportThunk } from './PageThunks';\r\nimport Grid from '@mui/material/Grid';\r\nimport { getDashboardIsEditable, getPageNumber } from '../settings/SettingsSelectors';\r\nimport { getDashboardSettings } from '../dashboard/DashboardSelectors';\r\nimport { Responsive, WidthProvider } from 'react-grid-layout';\r\nimport { GRID_COMPACTION_TYPE } from '../config/PageConfig';\r\n\r\nconst ResponsiveGridLayout = WidthProvider(Responsive);\r\n\r\n/**\r\n * A component responsible for rendering the **current** page, a collection of reports.\r\n */\r\nexport const NeoPage = ({\r\n  editable = true, // Whether the page is editable.\r\n  dashboardSettings, // global settings for the entire dashboard.\r\n  pagenumber, // The page number to render.\r\n  reports = [], // list of reports as defined in the dashboard state.\r\n  onCreatePressed = () => {}, // callback for when the user wants to add a new report.\r\n  onClonePressed = () => {}, // callback/action to take when a user wants to clone a report\r\n  onRemovePressed = () => {}, // action to take when a report gets removed.\r\n  onPageLayoutUpdate = () => {}, // action to take when the page layout is updated.\r\n}) => {\r\n  const getReportKey = (pagenumber: number, id: string) => {\r\n    return `${pagenumber}:${id}`;\r\n  };\r\n\r\n  const defaultLayouts = {\r\n    lg: [\r\n      {\r\n        x: 0,\r\n        y: 0,\r\n        i: getReportKey(pagenumber, '999999'),\r\n        w: 6,\r\n        h: 3,\r\n        isDraggable: false,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const [isDragging, setIsDragging] = React.useState(false);\r\n  const [layouts, setLayouts] = React.useState(defaultLayouts);\r\n  const [lastElement, setLastElement] = React.useState(<div key={getReportKey(pagenumber, '999999')}></div>);\r\n  const [animated, setAnimated] = React.useState(false); // To turn off animations when cards are dragged around.\r\n\r\n  const availableHandles = () => {\r\n    if (dashboardSettings.resizing && dashboardSettings.resizing == 'all') {\r\n      return ['s', 'w', 'e', 'sw', 'se'];\r\n    }\r\n    return ['se'];\r\n  };\r\n\r\n  /**\r\n   * Based on the current layout, determine where the 'add report' card should be placed.\r\n   * The position here is the 'first available (2x2) spot' on a row, starting from the top.\r\n   * @returns the position (x,y) of the add card button.\r\n   */\r\n  const getAddCardButtonPosition = () => {\r\n    // Find all reports that touch on a specific y-level.\r\n    if (reports.length == 0) {\r\n      return { x: 0, y: 0 };\r\n    }\r\n\r\n    const maxY = Math.max.apply(\r\n      Math,\r\n      reports.map((o) => {\r\n        return o.y + o.height;\r\n      })\r\n    );\r\n    const maxXbyYLevel = {}; // The max x value for each y-level.\r\n    for (let i = 0; i < maxY; i++) {\r\n      maxXbyYLevel[i] = Math.max(\r\n        0,\r\n        Math.max.apply(\r\n          Math,\r\n          reports\r\n            .filter((report) => report.y + report.height > i && report.y <= i)\r\n            .map((o) => {\r\n              return o.x + o.width;\r\n            })\r\n        )\r\n      );\r\n    }\r\n\r\n    for (let level = 0; level < maxY; level++) {\r\n      if (maxXbyYLevel[level] <= 18 && (maxXbyYLevel[level + 1] === undefined || maxXbyYLevel[level + 1] <= 18)) {\r\n        return { x: maxXbyYLevel[level] !== undefined ? maxXbyYLevel[level] : 0, y: level };\r\n      }\r\n    }\r\n    return { x: 0, y: maxY };\r\n  };\r\n  /**\r\n   * Recompute the layout of the page buttons.This is called whenever the pages get reorganized.\r\n   */\r\n  const recomputeLayout = () => {\r\n    const { x, y } = getAddCardButtonPosition();\r\n    setLayouts({\r\n      // @ts-ignore\r\n      lg: [\r\n        ...reports.map((report) => {\r\n          return {\r\n            x: report.x || 0,\r\n            y: report.y || 0,\r\n            i: getReportKey(pagenumber, report.id),\r\n            w: Math.max(parseInt(report.width), 4) || 4,\r\n            h: Math.max(parseInt(report.height), 2) || 2,\r\n            minW: 4,\r\n            minH: 2,\r\n            resizeHandles: availableHandles(),\r\n            isDraggable: true,\r\n          };\r\n        }),\r\n        {\r\n          x: x,\r\n          y: y,\r\n          i: getReportKey(pagenumber, '999999'),\r\n          w: 6,\r\n          h: 4,\r\n          minW: 6,\r\n          minH: 4,\r\n          isDraggable: false,\r\n          isResizable: false,\r\n        },\r\n      ],\r\n    });\r\n    setLastElement(\r\n      <Grid style={{ paddingBottom: '6px' }} key={getReportKey(pagenumber, '999999')}>\r\n        <NeoAddCard\r\n          onCreatePressed={() => {\r\n            const { x, y } = getAddCardButtonPosition();\r\n            onCreatePressed(x, y, 6, 4);\r\n          }}\r\n        />\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    setAnimated(false);\r\n    recomputeLayout();\r\n  }, [reports, dashboardSettings.resizing, pagenumber]);\r\n\r\n  const content = (\r\n    <div className='n-pt-3'>\r\n      <ResponsiveGridLayout\r\n        draggableHandle='.drag-handle'\r\n        layouts={layouts}\r\n        className={`layout neodash-card-editable-${editable} ${animated ? 'animated' : 'not-animated'}`}\r\n        breakpoints={{ lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 }}\r\n        cols={{ lg: 24, md: 20, sm: 12, xs: 8, xxs: 4 }}\r\n        rowHeight={100}\r\n        compactType={GRID_COMPACTION_TYPE}\r\n        onDrag={() => {\r\n          if (!isDragging) {\r\n            setAnimated(true);\r\n            setIsDragging(true);\r\n            recomputeLayout();\r\n          }\r\n        }}\r\n        onDragStop={(newLayout) => {\r\n          if (isDragging) {\r\n            onPageLayoutUpdate(newLayout);\r\n            setIsDragging(false);\r\n          }\r\n        }}\r\n        onResize={() => {\r\n          setIsDragging(true);\r\n          if (!animated) {\r\n            setAnimated(true);\r\n          }\r\n        }}\r\n        onResizeStop={(newLayout) => {\r\n          setIsDragging(false);\r\n          onPageLayoutUpdate(newLayout);\r\n        }}\r\n      >\r\n        {reports.map((report) => {\r\n          const w = 24;\r\n          const { id } = report;\r\n          // @ts-ignore\r\n          return (\r\n            <Grid\r\n              key={getReportKey(pagenumber, id)}\r\n              style={{ paddingBottom: '6px' }}\r\n              item\r\n              xs={Math.min(w * 4, 24)}\r\n              sm={Math.min(w * 2, 24)}\r\n              md={Math.min(w * 2, 24)}\r\n              lg={Math.min(w, 24)}\r\n              xl={Math.min(w, 24)}\r\n            >\r\n              <NeoCard\r\n                id={id}\r\n                key={getReportKey(pagenumber, id)}\r\n                dashboardSettings={dashboardSettings}\r\n                onRemovePressed={onRemovePressed}\r\n                onClonePressed={(id) => {\r\n                  const { x, y } = getAddCardButtonPosition();\r\n                  onClonePressed(id, x, y);\r\n                }}\r\n              />\r\n            </Grid>\r\n          );\r\n        })}\r\n        {editable && !isDragging ? lastElement : <div key={getReportKey(pagenumber, '999999')}></div>}\r\n      </ResponsiveGridLayout>\r\n    </div>\r\n  );\r\n  return content;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  pagenumber: getPageNumber(state),\r\n  editable: getDashboardIsEditable(state),\r\n  dashboardSettings: getDashboardSettings(state),\r\n  reports: getReports(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onRemovePressed: (id) => dispatch(removeReportThunk(id)),\r\n  onClonePressed: (id, x, y) => dispatch(cloneReportThunk(id, x, y)),\r\n  onCreatePressed: (x, y, width, height) => dispatch(addReportThunk(x, y, width, height, undefined)),\r\n  onPageLayoutUpdate: (layout) => dispatch(updatePageLayoutThunk(layout)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NeoPage);\r\n","import { createSelector } from 'reselect';\r\nexport const getReports = (state: any) => {\r\n  const { pagenumber } = state.dashboard.settings;\r\n  return state.dashboard.pages[pagenumber] ? state.dashboard.pages[pagenumber].reports : [];\r\n};\r\nexport const getReportsLoading = (state: any) => state.dashboard.isLoading;\r\n\r\n// TODO: Investigate to define what is the expected behavior => current filter is useless\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nexport const getCurrentReports = createSelector(getReports, (reports) => reports.filter((report) => true));\r\n","import { SELECTION_TYPES } from './CardConfig';\r\n\r\nexport const DASHBOARD_SETTINGS = {\r\n  editable: {\r\n    label: 'Editable',\r\n    type: SELECTION_TYPES.LIST,\r\n    values: [true, false],\r\n    default: true,\r\n    helperText:\r\n      'This controls whether users can edit your dashboard. Disable this to turn the dashboard into presentation mode.',\r\n  },\r\n  queryTimeLimit: {\r\n    label: 'Maximum Query Time (seconds)',\r\n    type: SELECTION_TYPES.NUMBER,\r\n    default: 45,\r\n    helperText: 'The maximum time a report is allowed to run before automatically aborted.',\r\n  },\r\n  downloadImageEnabled: {\r\n    label: 'Enable Image Download',\r\n    type: SELECTION_TYPES.LIST,\r\n    values: [true, false],\r\n    default: false,\r\n    helperText: 'Shows a button in the dashboard header that lets users capture their dashboard as an image.',\r\n  },\r\n  disableRowLimiting: {\r\n    label: 'Disable Row Limiting ⚠️',\r\n    type: SELECTION_TYPES.LIST,\r\n    values: [true, false],\r\n    default: false,\r\n    helperText:\r\n      'This disables the automatic row limiting feature. When disabled, always ensure your queries are not returning too many rows.',\r\n  },\r\n  resizing: {\r\n    label: 'Resize Mode',\r\n    type: SELECTION_TYPES.LIST,\r\n    values: ['bottom-right', 'all'],\r\n    default: 'bottom-right',\r\n    helperText: 'These are the resize handle options shared across all reports. ',\r\n  },\r\n  darkLuma: {\r\n    label: 'Luma Threshold',\r\n    type: SELECTION_TYPES.NUMBER,\r\n    default: 25,\r\n    helperText: 'Background colors under this threshold will be considered as dark',\r\n  },\r\n  pagenumber: {\r\n    label: 'Page Number',\r\n    type: SELECTION_TYPES.NUMBER,\r\n    disabled: true,\r\n    helperText: 'This is the number of the currently selected page.',\r\n  },\r\n  parameters: {\r\n    label: 'Global Parameters',\r\n    type: SELECTION_TYPES.DICTIONARY,\r\n    disabled: true,\r\n    helperText:\r\n      \"These are the query parameters shared across all reports. You can set these using a 'property select' report.\",\r\n  },\r\n  extensions: {\r\n    label: 'Extensions',\r\n    type: SELECTION_TYPES.LIST,\r\n    multiple: true,\r\n    values: ['actions'],\r\n    default: false,\r\n    hidden: true,\r\n  },\r\n};\r\n","import React from 'react';\r\nimport NeoSetting from '../component/field/Setting';\r\nimport { DASHBOARD_SETTINGS } from '../config/DashboardConfig';\r\nimport { Dialog, IconButton, MenuItem } from '@neo4j-ndl/react';\r\nimport { Cog6ToothIconOutline } from '@neo4j-ndl/react/icons';\r\nimport Tooltip from '@mui/material/Tooltip/Tooltip';\r\n\r\nexport const NeoSettingsModal = ({ dashboardSettings, updateDashboardSetting }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const settings = DASHBOARD_SETTINGS;\r\n  // Else, build the advanced settings view.\r\n  const advancedDashboardSettings = (\r\n    <div style={{ marginLeft: '-10px' }}>\r\n      {Object.keys(settings)\r\n        .filter((setting) => !settings[setting].hidden)\r\n        .map((setting) => (\r\n          <div key={setting}>\r\n            <NeoSetting\r\n              key={setting}\r\n              value={dashboardSettings[setting]}\r\n              type={settings[setting].type}\r\n              disabled={settings[setting].disabled}\r\n              helperText={settings[setting].helperText}\r\n              label={settings[setting].label}\r\n              defaultValue={settings[setting].default}\r\n              choices={settings[setting].values}\r\n              onChange={(e) => updateDashboardSetting(setting, e)}\r\n            />\r\n            <br />\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title='Settings' aria-label='settings' disableInteractive>\r\n        <IconButton className='n-mx-1' onClick={handleClickOpen} aria-label='Settings'>\r\n          <Cog6ToothIconOutline />\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      <Dialog size='large' open={open} onClose={handleClose} aria-labelledby='form-dialog-title'>\r\n        <Dialog.Header id='form-dialog-title'>\r\n          <Cog6ToothIconOutline className='icon-base icon-inline text-r' />\r\n          Dashboard Settings\r\n        </Dialog.Header>\r\n        <Dialog.Content>\r\n          You can modify settings for your entire dashboard here.\r\n          <br />\r\n          <br />\r\n          {advancedDashboardSettings}\r\n          <br />\r\n        </Dialog.Content>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NeoSettingsModal;\r\n","import React from 'react';\r\nimport type { MouseEvent, KeyboardEvent } from 'react';\r\nimport { MouseSensor as LibMouseSensor, KeyboardSensor as LibKeyboardSensor } from '@dnd-kit/core';\r\n\r\nexport class MouseSensor extends LibMouseSensor {\r\n  static activators = [\r\n    {\r\n      eventName: 'onMouseDown' as const,\r\n      handler: ({ nativeEvent: event }: MouseEvent) => {\r\n        return shouldHandleEvent(event.target as HTMLElement);\r\n      },\r\n    },\r\n  ];\r\n}\r\n\r\nexport class KeyboardSensor extends LibKeyboardSensor {\r\n  static activators = [\r\n    {\r\n      eventName: 'onKeyDown' as const,\r\n      handler: ({ nativeEvent: event }: KeyboardEvent<Element>) => {\r\n        return shouldHandleEvent(event.target as HTMLElement);\r\n      },\r\n    },\r\n  ];\r\n}\r\n\r\nfunction shouldHandleEvent(element: HTMLElement | null) {\r\n  let cur = element;\r\n\r\n  while (cur) {\r\n    if (cur?.dataset?.noDnd) {\r\n      return false;\r\n    }\r\n    cur = cur.parentElement;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nexport const enterHandler = (event: React.KeyboardEvent<HTMLElement>, callback) => {\r\n  if (event.key === 'Enter') {\r\n    // 👇 Get input value\r\n    callback(event);\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\nexport const openTab = (url, target = '_blank') => {\r\n  window.open(url, target);\r\n};\r\n"],"names":["connect","state","ownProps","report","getReportState","id","extensions","getDashboardExtensions","editable","getDashboardIsEditable","database","getDatabase","dashboardSettings","pagenumber","globalParameters","getGlobalParameters","getSessionParameters","dispatch","onTitleUpdate","title","updateReportTitleThunk","onQueryUpdate","query","updateReportQueryThunk","onTypeUpdate","type","updateReportTypeThunk","onReportSettingUpdate","setting","value","updateReportSettingThunk","onFieldsUpdate","fields","updateFieldsThunk","onGlobalParameterUpdate","key","updateGlobalParameterThunk","onSelectionUpdate","selectable","field","updateSelectionThunk","onToggleCardSettings","open","toggleCardSettingsThunk","onReportHelpButtonPressed","setReportHelpModalOpen","onToggleReportSettings","toggleReportSettings","onDatabaseChanged","updateReportDatabaseThunk","createNotification","message","createNotificationThunk","loadDatabaseListFromNeo4j","driver","callback","loadDatabaseListFromNeo4jThunk","onRemovePressed","onClonePressed","useContext","Neo4jContext","React","databaseList","setDatabaseList","databaseListLoaded","setDatabaseListLoaded","ref","useEffect","result","index","indexOf","splice","settingsOpen","setSettingsOpen","debouncedOnToggleCardSettings","useCallback","debounce","collapseTimeout","setCollapseTimeout","useDimensions","onResize","observe","unobserve","width","height","useState","expanded","setExpanded","onToggleCardExpand","settings","undefined","autorun","active","setActive","component","className","disablestrictmodecompat","in","timeout","updateReportSetting","name","onDownloadImage","downloadComponentAsImage","selection","widthPx","heightPx","reportId","schema","reportSettings","reportSettingsOpen","advancedSettingsOpen","Content","style","document","documentElement","clientHeight","onCreatePressed","onClick","size","floating","dashboard","pages","reports","find","o","ReportItemContainer","styled","div","fullscreenEnabled","maximizeButton","IconButton","Expand","unMaximizeButton","Shrink","CardHeader","avatar","marginTop","paddingBottom","clean","Drag","Tooltip","disableInteractive","color","action","e","preventDefault","subheader","forceRunQuery","queryText","setQueryText","debouncedQueryUpdate","databaseText","setDatabaseText","debouncedDatabaseUpdate","reportTypes","getReportTypes","SettingsComponent","settingsComponent","updateCypherQuery","defaultQueryBoxComponent","language","inputMode","onExecute","onChange","placeholder","DEFAULT_CARD_SETTINGS_HELPER_TEXT_STYLE","helperText","CardContent","Dropdown","label","selectProps","newValue","Object","keys","options","map","option","menuPortalTarget","querySelector","fluid","marginLeft","marginRight","maxWidth","display","disableDatabaseSelector","objMerge","EXTENSIONS_CARD_SETTINGS_COMPONENT","filter","length","res","Component","reportType","cypherQuery","renderExtensionsComponents","reportHeight","CARD_HEADER_HEIGHT","cardSettingsHeader","cardSettingsContent","cardSettingsFooter","description","downloadImageEnabled","refreshButtonEnabled","onManualRefreshCard","parameters","text","setText","parsedText","setParsedText","editing","setEditing","descriptionModalOpen","setDescriptionModalOpen","debouncedTitleUpdate","s","p","parsed","titleParsed","replaceDashboardParameters","theme","createTheme","typography","fontFamily","allVariants","palette","primary","disabled","cardTitle","ThemeProvider","TextField","onFocus","onBlur","fullWidth","maxRows","event","target","paddingTop","variant","sx","WebkitTextFillColor","descriptionEnabled","settingsButton","refreshButton","downloadImageButton","descriptionButton","Dialog","onClose","DialogTitle","padding","float","DialogContent","minWidth","plugins","gfm","children","showOptionalSelections","selectableFields","selectables","nodeColorScheme","hideSelections","ignoreLabelColors","CardActions","position","paddingLeft","overflowX","disableSpacing","selectionIsMandatory","optional","SELECTION_TYPES","NODE_PROPERTIES","totalColors","categoricalColorSchemes","fieldSelections","i","nodeLabel","discoveredProperties","slice","properties","sort","concat","inputColor","FormControl","InputLabel","Select","labelId","backgroundColor","MenuItem","LIST","NUMBER","NUMBER_OR_DATETIME","TEXT","sortedFields","fieldsToRender","multiple","v","sel","isMulti","isClearable","ErrorBoundary","withErrorBoundary","resetTrigger","useErrorBoundary","error","resetError","stack","NeoReportWrapper","lastRunTimestamp","setFields","setGlobalParameter","getGlobalParameter","dimensions","rowLimit","queryTimeLimit","ChartType","CARD_FOOTER_HEIGHT","cardHeight","settingsSelector","fromEntries","entries","REPORT_TYPES","refresh","reduce","obj","assign","Date","now","setLastRunTimestamp","selectorChange","setSelectorChange","getLocalParameters","parse_string","drilldown","match","re","styleRules","styleParams","extensionEnabled","identifyStyleRuleParameters","formFields","formsParams","f","flat","localQueryVariables","exec","push","params","local","includes","ignoreNonDefinedParams","reportHeader","reportFooter","localParameters","drilldownLink","reportTypeHasNoFooter","withoutFooter","JSON","stringify","cardContentStyle","paddingRight","overflow","reportContent","disableRowLimiting","maxRecords","border","borderRight","connection","onConnectionUpdate","existingConnection","setExistingConnection","isEqual","useConnection","protocol","url","port","username","password","GRID_COMPACTION_TYPE","applicationGetConnection","getPageNumber","standaloneSettings","applicationGetStandaloneSettings","forceRefreshPage","onDownloadDashboardAsImage","onAboutModalOpen","resetApplication","setDriver","newDriver","createDriver","userAgent","version","content","Neo4jProvider","borderColor","minHeight","window","innerHeight","standalone","standaloneAllowLoad","standalonePassword","standalonePasswordWarningHidden","textAlign","marginBottom","dashboardTitle","getDashboardTitle","customHeader","applicationGetCustomHeader","getPages","getDashboardSettings","themeMode","getDashboardTheme","setDashboardTitle","setTheme","updateDashboardSetting","onConnectionModalOpen","setConnectionModalOpen","dashboardTitleText","setDashboardTitleText","isDarkMode","setDarkMode","checked","sunColor","DASHBOARD_HEADER_BUTTON_COLOR","moonColor","StyleConfig","getInstance","anchorEl","setAnchorEl","handleHelpMenuClose","menuOpen","Boolean","menuAboutHandler","currentTarget","anchorOrigin","horizontal","vertical","transformOrigin","examples","getExampleReports","onKeyDown","enterHandler","openTab","icon","NeoDashboardHeaderDownloadImageButton","NeoLogoutButton","standaloneMultiDatabase","applicationIsStandalone","selectPage","number","setPageNumberThunk","addPage","addPageThunk","movePage","oldIndex","newIndex","movePageThunk","canSwitchPages","setCanSwitchPages","debouncedSetCanSwitchPages","pageAddButton","mouseSensor","useSensor","MouseSensor","activationConstraint","distance","keySensor","KeyboardSensor","keyboardCodes","start","cancel","end","sensors","useSensors","fill","tabId","onDragEnd","over","parseInt","split","items","strategy","horizontalListSortingStrategy","page","tabIndex","setPageTitle","removePage","removePageThunk","deleteModalOpen","setDeleteModalOpen","inputWidth","setInputWidth","handleMenuEditClick","useSortable","attributes","listeners","setNodeRef","transform","transition","isDragging","isSorting","CSS","Transform","toString","debouncedSetPageTitle","titleText","setTitleText","onSubmit","autoFocus","scrollWidth","classnames","stopPropagation","modalOpen","onRemove","handleClose","setDraft","debouncedDashboardTitleUpdate","fontSize","fontWeight","EXTENSIONS_DRAWER_BUTTONS","renderExtensionsButtons","closeMenu","Menu","Modal","UNSAVED_DASHBOARD_INDEX","readonly","draft","dashboardIsDraft","getDashboardJson","applicationGetConnectionDatabase","removeReportThunk","resetLocalDashboard","resetDashboardState","loadDashboard","uuid","loadDashboardThunk","loadDashboardFromNeo4j","loadDashboardFromNeo4jThunk","loadDashboardListFromNeo4j","loadDashboardListFromNeo4jThunk","saveDashboardToNeo4j","date","user","onSuccess","saveDashboardToNeo4jThunk","deleteDashboardFromNeo4j","deleteDashboardFromNeo4jThunk","setOnExpanded","selectedDashboardIndex","setSelectedDashboardIndex","dashboardDatabase","setDashboardDatabase","databases","setDatabases","inspectedIndex","setInspectedIndex","searchText","setSearchText","menuAnchor","setMenuAnchor","NONE","setMenuOpen","setModalOpen","dashboards","setDashboards","cachedDashboard","setCachedDashboard","getDashboardListFromNeo4j","list","findIndex","element","createDashboard","SAVE","onConfirm","toISOString","setTimeout","overwrite","LOAD","file","SHARE","onLegacyShareClicked","SHARE_LEGACY","CREATE","DELETE","IMPORT","onImport","createUUID","INFO","EXPORT","ACCESS","onExpandedChange","dispatchEvent","Event","selected","setSelected","newDatabase","DATABASE","DASHBOARD","handleInfoClicked","d","parse","handleDiscardClicked","handleSaveClicked","handleLoadClicked","handleExportClicked","handleShareClicked","handleAccessClicked","handleDeleteClicked","handleNewClicked","handleImportClicked","lineHeight","standaloneLoadFromOtherDatabases","standaloneDatabaseList","tmp","x","trim","leftIcon","NEODASH_VERSION","saved","onSelect","onSettingsOpen","toLowerCase","DashboardSidebarListItem","whiteSpace","justifyContent","borderWidth","borderStyle","borderRadius","selectedLabels","setSelectedLabels","allLabels","setAllLabels","neo4jLabels","setNeo4jLabels","newLabel","setNewLabel","INITIAL_LABEL","feedback","setFeedback","useDispatch","runCypherQuery","records","record","get","console","handleCloseMenu","handleLabelSelect","Header","href","rel","textDecoration","handleAddNewLabel","errorText","autoComplete","flexWrap","alignItems","onDelete","updatedLabels","selectedLabel","handleDeleteLabel","Actions","toDelete","item","join","status","QueryStatus","COMPLETE","Subtitle","filteredDashboard","filterNestedDict","removedKeys","valueIsArray","valueIsObject","forEach","k","dashboardString","createElement","Blob","URL","createObjectURL","download","body","appendChild","click","loadFromFile","useRef","onSelectFileClick","files","current","hidden","columns","headerName","rows","author","pageSize","rowsPerPageOptions","disableSelectionOnClick","headerHeight","hideFooter","components","ColumnSortedDescendingIcon","ColumnSortedAscendingIcon","shareBaseURL","shareBaseURLAlternative","shareLocalURL","location","origin","startsWith","selfHosted","setSelfHosted","setStandalone","includeCredentials","setIncludeCredentials","getShareURL","prefix","encodeURIComponent","db","suffix1","suffix2","externalLink","shareType","shareID","setShareID","shareConnectionDetails","setShareConnectionDetails","shareStandalone","setShareStandalone","shareLink","setShareLink","defaultValue","choices","setExtensionEnabled","enabled","setExtensionReducerEnabled","onExtensionUnavailableTriggered","setOpen","values","EXTENSIONS","opacity","reducerPrefix","valign","link","src","image","NeoDeletePageModal","NeoReportExamplesModal","handleClickOpen","example","exampleQuery","syntheticQuery","chartType","ResponsiveGridLayout","WidthProvider","Responsive","getReports","y","cloneReportThunk","addReportThunk","onPageLayoutUpdate","layout","updatePageLayoutThunk","getReportKey","defaultLayouts","lg","w","h","isDraggable","setIsDragging","layouts","setLayouts","lastElement","setLastElement","animated","setAnimated","getAddCardButtonPosition","maxY","Math","max","apply","maxXbyYLevel","level","recomputeLayout","minW","minH","resizeHandles","resizing","isResizable","draggableHandle","breakpoints","md","sm","xs","xxs","cols","rowHeight","compactType","onDrag","onDragStop","newLayout","onResizeStop","min","xl","createSelector","DASHBOARD_SETTINGS","default","darkLuma","DICTIONARY","advancedDashboardSettings","LibMouseSensor","eventName","handler","nativeEvent","shouldHandleEvent","LibKeyboardSensor","cur","dataset","noDnd","parentElement"],"sourceRoot":""}